<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>복지관2층매장</title>

<style>
:root{
  --bg:#f5f6f8;
  --card:#ffffff;
  --ink:#0f172a;
  --muted:#64748b;
  --line:#e5e7eb;

  --sk:#2563eb;
  --kt:#111827;
  --lg:#16a34a;
  --hot:#f97316;
  --low:#7c3aed;

  --call:#22c55e;
  --sms:#38bdf8;
  --kakao:#fee500;
}

*{box-sizing:border-box;}
html,body{margin:0;padding:0;}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR",system-ui,sans-serif;
  background:var(--bg);
  color:var(--ink);
}

.wrap{max-width:760px;margin:0 auto;padding:14px 14px 160px;}

/* 상단 안내 */
.hero{
  background:#ffe866;
  border-radius:16px;
  padding:14px;
  font-weight:900;
  text-align:center;
}

/* ===== 탭 ===== */
.tabs.nice{
  display:flex;
  gap:8px;
  margin-top:14px;
}
.tabs.nice .tabBtn{
  flex:1;
  padding:12px 0;
  border-radius:999px;
  border:1px solid var(--line);
  background:#fff;
  font-weight:1000;
  font-size:14px;
  cursor:pointer;
  transition:all .15s ease;
}
.tabs.nice .tabBtn:hover{
  transform:translateY(-1px);
  box-shadow:0 4px 10px rgba(0,0,0,.08);
}
.tabs.nice .tabBtn.active{
  color:#fff;
  border-color:transparent;
}
.tabs.nice .tabBtn.sk.active{background:var(--sk);}
.tabs.nice .tabBtn.kt.active{background:var(--kt);}
.tabs.nice .tabBtn.lg.active{background:var(--lg);}
.tabs.nice .tabBtn.hot.active{background:var(--hot);}
.tabs.nice .tabBtn.low.active{background:var(--low);}

/* ===== 카드 ===== */
.panel{
  margin-top:14px;
  background:#fff;
  border-radius:16px;
  padding:14px;
}
.list{display:flex;flex-direction:column;gap:10px;}
.card{
  border:1px solid var(--line);
  border-radius:14px;
  padding:12px;
}
.titleRow{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.model{font-weight:1000;}
.badge{
  font-size:12px;
  font-weight:1000;
  padding:6px 10px;
  border-radius:999px;
  color:#fff;
}
.badge.sk{background:var(--sk);}
.badge.kt{background:var(--kt);}
.badge.lg{background:var(--lg);}
.badge.hot{background:var(--hot);}
.badge.low{background:var(--low);}

.infoLine{
  margin:6px 0 10px;
  font-size:12px;
  font-weight:900;
  color:var(--muted);
}

.priceRow{display:flex;gap:10px;}
.pill{
  flex:1;
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px;
  text-align:center;
}
.pill .k{font-size:12px;color:var(--muted);font-weight:900;}
.pill .v{font-size:20px;font-weight:1000;}

.neg{color:#dc2626;}
.zero{color:#0ea5e9;}

/* 하단 */
.fixedNotice{
  position:fixed;
  bottom:60px;
  left:0;right:0;
  background:#fff;
  border-top:1px solid var(--line);
  text-align:center;
  font-weight:1000;
  padding:10px;
}
.bottomBar{
  position:fixed;
  bottom:0;left:0;right:0;
  display:flex;
  height:60px;
}
.action{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:1000;
  text-decoration:none;
}
.action.call{background:var(--call);color:#fff;}
.action.sms{background:var(--sms);}
.action.kakao{background:var(--kakao);}
</style>
</head>

<body>
<div class="wrap">
  <div class="hero">인터넷·알뜰요금 카톡문의</div>

  <div class="tabs nice">
    <button class="tabBtn sk active" data-tab="SK">SK</button>
    <button class="tabBtn kt" data-tab="KT">KT</button>
    <button class="tabBtn lg" data-tab="LG">LG</button>
    <button class="tabBtn hot" data-tab="HOT">핫딜</button>
    <button class="tabBtn low" data-tab="LOW">저가</button>
  </div>

  <div class="panel">
    <div class="list" id="list"></div>
  </div>
</div>

<div class="fixedNotice">
  액정필름 무료교체<br>
  카톡 주문 후 복지관2층 매장 방문
</div>

<div class="bottomBar">
  <a class="action call" href="tel:042-821-2272">전화</a>
  <a class="action sms" href="sms:010-5839-1512">문자</a>
  <a class="action kakao" href="https://open.kakao.com/o/s729bI5h">카톡</a>
</div>

<script>
function asNum(v){
  const n = Number(v);
  return Number.isFinite(n) ? n : null;
}
function clearList(){document.getElementById("list").innerHTML="";}

async function loadCSV(){
  const res = await fetch("data.csv?v="+Date.now());
  const text = await res.text();
  const rows = text.trim().split("\n").map(r=>r.split(","));
  const h = rows.shift();
  return rows.map(r=>{
    const o={}; h.forEach((k,i)=>o[k]=r[i]); return o;
  });
}

function addCard(badge, cls, model, move, change, info, item){
  document.getElementById("list").innerHTML += `
  <div class="card">
    <div class="titleRow">
      <div class="model">${model}</div>
      <div class="badge ${cls}">${badge}</div>
    </div>
    <div class="infoLine">${info}</div>
    ${item?.["요금할인"]==="O" ? `<div class="infoLine" style="color:#2563eb;">요금할인도 가능</div>`:""}
    <div class="priceRow">
      <div class="pill"><div class="k">이동</div><div class="v ${asNum(move)<0?"neg":""}">${move}</div></div>
      <div class="pill"><div class="k">기변</div><div class="v ${asNum(change)<0?"neg":""}">${change}</div></div>
    </div>
  </div>`;
}

async function render(tab){
  clearList();
  const items = await loadCSV();

  if(tab==="HOT"){
    items.filter(x=>{
      const nums=[
        asNum(x["SK_이동"]),asNum(x["SK_기변"]),
        asNum(x["KT_이동"]),asNum(x["KT_기변"]),
        asNum(x["LG_이동"]),asNum(x["LG_기변"])
      ];
      return nums.some(n=>n!==null && n<0);
    }).forEach(x=>{
      addCard("핫딜","hot",x["기종"],x["SK_이동"],x["SK_기변"],
      "이동/기변 중 마이너스 발생",x);
    });
    return;
  }

  if(tab==="LOW"){
    items.filter(x=>asNum(x["SK_요금제"])>0 && asNum(x["SK_요금제"])<109)
    .forEach(x=>{
      addCard("저가","low",x["기종"],x["SK_이동"],x["SK_기변"],
      `SK ${x["SK_요금제"]}요금 6개월 / 부가필수 문의`,x);
    });
    return;
  }

  items.forEach(x=>{
    addCard(tab,tab.toLowerCase(),x["기종"],x[`${tab}_이동`],x[`${tab}_기변`],
    `${tab} 요금제 / 부가필수 문의`,x);
  });
}

document.querySelectorAll(".tabBtn").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll(".tabBtn").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    render(b.dataset.tab);
  };
});

render("SK");
</script>
</body>
</html>
