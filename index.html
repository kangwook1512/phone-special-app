<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° íŠ¹íŒ ì•ˆë‚´ | SKÂ·KTÂ·LG Â· ì¸í„°ë„·TV Â· ì•Œëœ°ìš”ê¸ˆ</title>
  <meta name="description" content="ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° ë§¤ì¥ íŠ¹íŒ ì „ìš© ì‚¬ì´íŠ¸. SKÂ·KTÂ·LG íœ´ëŒ€í° íŠ¹íŒ, ì¸í„°ë„·Â·TV í˜„ê¸ˆ ì§€ì›, ì•Œëœ°ìš”ê¸ˆ 3,300ì›~ ì‹¤ì‹œê°„ ì•ˆë‚´." />
  <link rel="canonical" href="https://a2272a.github.io/" />
  <meta name="robots" content="index,follow" />
  <meta name="keywords" content="ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í°, íœ´ëŒ€í° íŠ¹íŒ, ì•Œëœ°ìš”ê¸ˆ 3300ì›, íœ´ëŒ€í° ì„±ì§€, ì—°êµ¬ì†Œ íœ´ëŒ€í°, ì¸í„°ë„· TV í˜„ê¸ˆì§€ì›" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0ea5e9"/>

  <style>
    :root{
      --bg:#f4fbff;
      --ink:#0b1220;
      --sub:#334155;

      --blue:#0ea5e9;
      --blue2:#2563eb;

      --card:#ffffff;
      --line:rgba(15,23,42,0.10);

      --shadow: 0 18px 40px rgba(15,23,42,0.12);
      --shadow2: 0 10px 22px rgba(15,23,42,0.10);

      --radius:22px;

      /* carrier accent */
      --skt:#ff3b4a;
      --kt:#111827;
      --lg:#c026d3;
      --internet:#f97316;
      --mvno:#16a34a;

      /* price */
      --price-free:#0ea5e9;
      --price-minus:#ef4444;
      --price-cash:#f59e0b;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,'Noto Sans KR',sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 520px at 10% 0%, rgba(14,165,233,0.18) 0%, rgba(14,165,233,0) 55%),
        radial-gradient(900px 460px at 95% 20%, rgba(34,197,94,0.12) 0%, rgba(34,197,94,0) 60%),
        linear-gradient(180deg, #ffffff 0%, var(--bg) 35%, #ffffff 100%);
    }

    .app{
      width:100%;
      min-height:100vh;
      display:flex;
      flex-direction:column;
      padding-bottom:84px; /* bottom bar space */
    }

    @media(min-width:1100px){
      .app{
        max-width:1100px;
        margin:18px auto;
        border-radius:28px;
        overflow:hidden;
        background:#fff;
        box-shadow:0 26px 60px rgba(15,23,42,0.14);
      }
      body{background:#eef7ff;}
    }

    .hero{
      padding:18px 18px 14px;
      background:
        radial-gradient(1000px 420px at 15% 0%, rgba(14,165,233,0.22) 0%, rgba(14,165,233,0) 60%),
        linear-gradient(180deg, #ffffff 0%, #f0fbff 100%);
      border-bottom:1px solid var(--line);
    }
    .hero-title{
      margin:0;
      font-size:34px;
      font-weight:1000;
      letter-spacing:-0.06em;
      line-height:1.05;
    }
    .hero-sub{
      margin:10px 0 0;
      font-size:15px;
      font-weight:900;
      color:var(--sub);
    }

    /* Tabs */
    .tab-bar{
      position:sticky; top:0; z-index:30;
      background:rgba(255,255,255,0.94);
      backdrop-filter:saturate(180%) blur(10px);
      border-bottom:1px solid var(--line);
      padding:10px 12px 12px;
    }

    /* ëª¨ë°”ì¼: 2ì¤„(2/2/1) ëŠë‚Œ. ë°ìŠ¤í¬íƒ‘: í•œ ì¤„ */
    .tabs{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media(min-width:520px){
      .tabs{ grid-template-columns: repeat(3, 1fr); }
    }
    @media(min-width:900px){
      .tabs{ grid-template-columns: repeat(5, 1fr); }
    }

    .tab-btn{
      border:none; cursor:pointer;
      padding:14px 10px;
      border-radius:999px;
      font-size:15px;
      font-weight:1000;
      background:#fff;
      color:#0b1220;
      border:1px solid var(--line);
      box-shadow: var(--shadow2);
      white-space:nowrap;
    }
    .tab-btn.active{
      background:linear-gradient(135deg, var(--blue) 0%, var(--blue2) 100%);
      color:#fff;
      box-shadow:0 18px 30px rgba(37,99,235,0.22);
      border-color: rgba(37,99,235,0.25);
    }

    .content{padding:14px 14px 34px}
    .tab-panel{display:none}
    .tab-panel.active{display:block}

    /* list layout */
    .grid{
      display:grid;
      grid-template-columns:1fr;
      gap:14px;
    }
    @media(min-width:720px){
      .grid{ grid-template-columns:1fr 1fr; }
    }
    @media(min-width:1020px){
      .grid{ grid-template-columns:1fr 1fr 1fr; }
    }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:26px;
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .card-topline{
      height:7px;
      background: linear-gradient(90deg, rgba(255,59,74,0.95), rgba(59,130,246,0.85));
    }

    .card-body{ padding:16px 16px 14px; }
    .row1{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }

    .title{
      font-size:24px;
      font-weight:1000;
      letter-spacing:-0.04em;
      line-height:1.1;
      margin:0;
    }

    .tag{
      font-size:14px;
      font-weight:1000;
      color:#111827;
      background: #f1f5f9;
      border:1px solid rgba(15,23,42,0.10);
      padding:8px 10px;
      border-radius:999px;
      flex:0 0 auto;
    }

    .row2{
      margin-top:14px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
    }

    .price{
      font-size:52px;
      font-weight:1000;
      letter-spacing:-0.06em;
      line-height:0.95;
      margin:0;
    }
    .price-sub{
      font-size:13px;
      font-weight:1000;
      color:#64748b;
      margin-top:6px;
    }
    .sub{
      font-size:16px;
      font-weight:1000;
      color:#0f172a;
      text-align:right;
      line-height:1.2;
    }

    .badges{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .badge{
      font-size:13px;
      font-weight:1000;
      padding:8px 10px;
      border-radius:12px;
      border:1px solid rgba(15,23,42,0.12);
      background:#fff;
      color:#0f172a;
    }

    .hint{
      margin:10px 2px 0;
      font-size:13px;
      color:#64748b;
      font-weight:900;
    }

    /* price coloring by type */
    .pt-free .price{ color:#0f172a; }
    .pt-minus .price{ color:var(--price-minus); }
    .pt-cash .price{ color:var(--price-cash); }

    /* bottom contact bar */
    .bottom-bar{
      position:fixed;
      left:0; right:0; bottom:0;
      z-index:60;
      background: rgba(255,255,255,0.96);
      backdrop-filter: blur(10px) saturate(180%);
      border-top:1px solid var(--line);
      padding:10px 10px 12px;
    }
    @media(min-width:1100px){
      .bottom-bar{
        left:50%;
        transform:translateX(-50%);
        max-width:1100px;
        border-bottom-left-radius:28px;
        border-bottom-right-radius:28px;
      }
    }

    .actions{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
      align-items:center;
    }
    .act{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:14px 10px;
      border-radius:16px;
      border:1px solid var(--line);
      background:#fff;
      box-shadow: var(--shadow2);
      font-weight:1000;
      color:#0b1220;
      text-decoration:none;
      user-select:none;
    }
    .act.primary{
      background:linear-gradient(135deg, var(--blue) 0%, var(--blue2) 100%);
      color:#fff;
      border-color: rgba(37,99,235,0.25);
    }
    .act.kakao{
      background:#fee500;
      color:#0b1220;
      border-color:#facc15;
    }
    .act small{
      display:block;
      font-size:11px;
      font-weight:900;
      opacity:0.9;
      margin-top:2px;
    }

    .mini-row{
      display:flex;
      justify-content:space-between;
      gap:10px;
      margin-top:8px;
      font-size:12px;
      color:#64748b;
      font-weight:900;
      padding:0 2px;
    }
    .mini-row a{
      color:#2563eb;
      text-decoration:none;
      font-weight:1000;
    }

    /* empty state */
    .empty{
      padding:18px;
      border:1px dashed rgba(15,23,42,0.18);
      border-radius:18px;
      color:#475569;
      background:rgba(255,255,255,0.6);
      font-weight:900;
    }
  </style>
</head>

<body>
  <!-- ê²€ìƒ‰ ë³´ê°•ìš© ìˆ¨ê¹€ í…ìŠ¤íŠ¸ -->
  <div style="display:none">ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° ë§¤ì¥ íŠ¹íŒ ì „ìš© ì‚¬ì´íŠ¸</div>

  <div class="app">
    <header class="hero">
      <h1 class="hero-title">ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° íŠ¹íŒ ì•ˆë‚´</h1>
      <div class="hero-sub">SKÂ·KTÂ·LG / ì¸í„°ë„·Â·TV í˜„ê¸ˆ ìµœëŒ€ì§€ì› / ì•Œëœ°ìš”ê¸ˆ 3,300ì›~</div>
      <div class="hint">â€» ê°€ê²©/ì¡°ê±´ì€ ìˆ˜ì‹œ ë³€ë™ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°©ë¬¸ ì „ ë¬¸ì˜ ì¶”ì²œ</div>
    </header>

    <div class="tab-bar">
      <div class="tabs">
        <button class="tab-btn active" data-tab="skt">SKT</button>
        <button class="tab-btn" data-tab="kt">KT</button>
        <button class="tab-btn" data-tab="lg">LGU+</button>
        <button class="tab-btn" data-tab="internet">ì¸í„°ë„·Â·TV</button>
        <button class="tab-btn" data-tab="mvno">ì•Œëœ°ìš”ê¸ˆ</button>
      </div>
    </div>

    <main class="content">
      <section class="tab-panel active" data-panel="skt"><div id="list-skt" class="grid"></div></section>
      <section class="tab-panel" data-panel="kt"><div id="list-kt" class="grid"></div></section>
      <section class="tab-panel" data-panel="lg"><div id="list-lg" class="grid"></div></section>
      <section class="tab-panel" data-panel="internet"><div id="list-internet" class="grid"></div></section>
      <section class="tab-panel" data-panel="mvno"><div id="list-mvno" class="grid"></div></section>
    </main>
  </div>

  <!-- í•˜ë‹¨ ê³ ì • ë¬¸ì˜ ë°” -->
  <div class="bottom-bar">
    <div class="actions">
      <!-- âœ… ì—¬ê¸° ì „í™”ë²ˆí˜¸ ë°”ê¿” -->
      <a class="act primary" id="btn-call" href="tel:010-0000-0000">ğŸ“ ì „í™”</a>

      <!-- âœ… ì—¬ê¸° ë¬¸ìë²ˆí˜¸ ë°”ê¿” -->
      <a class="act" id="btn-sms" href="sms:010-0000-0000?body=ë³µì§€ê´€2ì¸µ%20íœ´ëŒ€í°%20íŠ¹íŒ%20ë¬¸ì˜ë“œë¦½ë‹ˆë‹¤.%0A(ê¸°ì¢…/%20í†µì‹ ì‚¬/%20ë²ˆí˜¸ì´ë™orê¸°ë³€)%20:%20">âœ‰ï¸ ë¬¸ì</a>

      <!-- âœ… ì—¬ê¸° ì¹´í†¡ ì˜¤í”ˆì±„íŒ… ë§í¬ ë°”ê¿” -->
      <a class="act kakao" id="btn-kakao" href="https://open.kakao.com/o/XXXXXXXX" target="_blank" rel="noopener">ğŸ’¬ ì¹´í†¡</a>
    </div>

    <div class="mini-row">
      <span id="visitText">ë°©ë¬¸: -</span>
      <span>
        <a href="/admin.html" target="_blank" rel="noopener">ê´€ë¦¬ìí˜ì´ì§€</a>
      </span>
    </div>
  </div>

  <script>
    // -----------------------------
    // íƒ­ ì „í™˜
    // -----------------------------
    const tabs=document.querySelectorAll(".tab-btn");
    const panels=document.querySelectorAll(".tab-panel");
    tabs.forEach(b=>b.onclick=()=>{
      tabs.forEach(x=>x.classList.remove("active"));
      panels.forEach(p=>p.classList.remove("active"));
      b.classList.add("active");
      document.querySelector(`[data-panel="${b.dataset.tab}"]`).classList.add("active");
      window.scrollTo({top:0,behavior:"smooth"});
    });

    // -----------------------------
    // CSV ë¡œë“œ + ë Œë”
    // carrier,title,tag,price,priceType,sub,badge1,badge2,badge3
    // -----------------------------
    const CARRIERS = ["skt","kt","lg","internet","mvno"];
    const listEls = {
      skt: document.getElementById("list-skt"),
      kt: document.getElementById("list-kt"),
      lg: document.getElementById("list-lg"),
      internet: document.getElementById("list-internet"),
      mvno: document.getElementById("list-mvno")
    };

    function escapeHtml(s){
      return String(s ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // ê°„ë‹¨ CSV íŒŒì„œ(ë”°ì˜´í‘œ í¬í•¨ ì§€ì›)
    function parseCSV(text){
      const rows=[];
      let i=0, field="", row=[], inQuotes=false;

      // BOM ì œê±°
      if (text.charCodeAt(0) === 0xFEFF) text = text.slice(1);

      while(i < text.length){
        const c=text[i];

        if(inQuotes){
          if(c === '"'){
            if(text[i+1] === '"'){ field+='"'; i++; }
            else { inQuotes=false; }
          }else{
            field += c;
          }
        }else{
          if(c === '"'){ inQuotes=true; }
          else if(c === ','){
            row.push(field.trim());
            field="";
          }else if(c === '\n'){
            row.push(field.trim());
            field="";
            // ë¹ˆ ì¤„ ìŠ¤í‚µ
            if(row.some(v=>String(v).trim()!=="")) rows.push(row);
            row=[];
          }else if(c === '\r'){
            // ignore
          }else{
            field += c;
          }
        }
        i++;
      }
      // last
      row.push(field.trim());
      if(row.some(v=>String(v).trim()!=="")) rows.push(row);

      if(rows.length===0) return { headers: [], data: [] };

      const headers = rows[0].map(h=>h.trim());
      const data = rows.slice(1).map(r=>{
        const obj={};
        headers.forEach((h,idx)=> obj[h]= (r[idx] ?? "").trim());
        return obj;
      });
      return { headers, data };
    }

    function normalizeCarrier(v){
      const x = String(v||"").trim().toLowerCase();
      if(x==="lgu+"||x==="lgu"||x==="lg") return "lg";
      if(x==="skt") return "skt";
      if(x==="kt") return "kt";
      if(x==="internet"||x==="tv"||x==="iptv") return "internet";
      if(x==="mvno"||x==="ì•Œëœ°"||x==="ì•Œëœ°ìš”ê¸ˆ") return "mvno";
      return x;
    }

    function extractNumberishPrice(priceText){
      // "íŒë§¤ê°€ 39ë§Œì›" -> 39 / "ì›” 3,300ì›~" -> 3,300(ë¬¸ì ìœ ì§€) / "0ì›" -> 0
      const s = String(priceText||"").trim();
      // ìˆ«ìë§Œ ë½‘ë˜, ì½¤ë§ˆëŠ” ìœ ì§€ ê°€ëŠ¥
      const m = s.match(/-?\d[\d,]*/);
      return m ? m[0] : s;
    }

    function renderCard(item){
      const title = item.title || "";
      const tag = item.tag || "";
      const priceType = (item.priceType || "free").toLowerCase();
      const priceRaw = item.price || "";
      const price = extractNumberishPrice(priceRaw);
      const sub = item.sub || "";

      const badges = [item.badge1, item.badge2, item.badge3].filter(Boolean).map(x=>x.trim()).filter(Boolean);

      return `
        <article class="card pt-${escapeHtml(priceType)}">
          <div class="card-topline"></div>
          <div class="card-body">
            <div class="row1">
              <h3 class="title">${escapeHtml(title)}</h3>
              ${tag ? `<div class="tag">${escapeHtml(tag)}</div>` : ``}
            </div>

            <div class="row2">
              <div>
                <div class="price">${escapeHtml(price)}</div>
                <div class="price-sub">${escapeHtml(priceRaw)}</div>
              </div>
              <div class="sub">${escapeHtml(sub)}</div>
            </div>

            ${badges.length ? `
              <div class="badges">
                ${badges.map(b=>`<span class="badge">${escapeHtml(b)}</span>`).join("")}
              </div>
            ` : ``}
          </div>
        </article>
      `;
    }

    function setEmpty(el, carrier){
      const nameMap = {skt:"SKT", kt:"KT", lg:"LGU+", internet:"ì¸í„°ë„·Â·TV", mvno:"ì•Œëœ°ìš”ê¸ˆ"};
      el.innerHTML = `<div class="empty">${nameMap[carrier]} ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. (ê´€ë¦¬ìí˜ì´ì§€ì—ì„œ data.csvë¥¼ ë¨¼ì € ì±„ì›Œì£¼ì„¸ìš”)</div>`;
    }

    async function loadAndRender(){
      // ì´ˆê¸° ë¹„ìš°ê¸°
      CARRIERS.forEach(c=>{
        listEls[c].innerHTML = "";
      });

      try{
        // cache busting: ?v=timestamp ë¡œ ì˜¤ë˜ëœ ìºì‹œ ë°©ì§€
        const res = await fetch("data.csv?v=" + Date.now(), { cache: "no-store" });
        if(!res.ok) throw new Error("fetch data.csv failed: " + res.status);

        const text = await res.text();
        if(!text || !text.trim()) throw new Error("csv is empty");

        const { headers, data } = parseCSV(text);

        // í•„ìˆ˜ í—¤ë” ì²´í¬
        const need = ["carrier","title","tag","price","priceType","sub","badge1","badge2","badge3"];
        const hasAll = need.every(h=>headers.includes(h));
        if(!hasAll){
          // ê·¸ë˜ë„ ê°€ëŠ¥í•œ ë§Œí¼ ë Œë” ì‹œë„
          console.warn("CSV headers missing. headers=", headers);
        }

        // carrierë³„ ë¶„ë°°
        const buckets = {skt:[], kt:[], lg:[], internet:[], mvno:[]};
        data.forEach(d=>{
          const c = normalizeCarrier(d.carrier);
          if(buckets[c]) buckets[c].push(d);
        });

        // ë Œë”
        CARRIERS.forEach(c=>{
          const items = buckets[c] || [];
          if(items.length===0) setEmpty(listEls[c], c);
          else listEls[c].innerHTML = items.map(renderCard).join("");
        });

      }catch(err){
        console.error(err);
        // ì—ëŸ¬ ì‹œ ëª¨ë“  íƒ­ì— í‘œì‹œ
        CARRIERS.forEach(c=>{
          listEls[c].innerHTML = `<div class="empty">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.<br/><br/>ì›ì¸: ${escapeHtml(err.message)}<br/><br/>í•´ê²°: data.csvê°€ ë£¨íŠ¸ì— ìˆê³ , 1í–‰ í—¤ë”ê°€ ì •í™•í•œì§€ í™•ì¸í•˜ì„¸ìš”.</div>`;
        });
      }
    }

    // -----------------------------
    // ë°©ë¬¸ì ì¹´ìš´íŒ… (ê°„ë‹¨ ë²„ì „: ë¡œì»¬ ê¸°ì¤€ + (ì„ íƒ) countapi)
    // -----------------------------
    const visitText = document.getElementById("visitText");
    (function visitorCount(){
      // 1) ë¡œì»¬(ë¸Œë¼ìš°ì €) ì¹´ìš´íŠ¸
      const key="visit_count_local";
      const n = Number(localStorage.getItem(key) || "0") + 1;
      localStorage.setItem(key, String(n));
      visitText.textContent = "ì´ ê¸°ê¸° ë°©ë¬¸: " + n;

      // 2) (ì„ íƒ) ì „ì„¸ê³„ ê³µìš© ì¹´ìš´íŠ¸: countapi (ë¬´ë£Œ/ê°€ë²¼ì›€)
      // í•„ìš”í•˜ë©´ ì•„ë˜ trueë¡œ ë°”ê¾¸ê³ , ë„¤ ì‚¬ì´íŠ¸ ê³ ìœ í‚¤ë¡œ ë³€ê²½í•´.
      const USE_COUNTAPI = false;
      const NAMESPACE = "a2272a-github-io";
      const KEY = "main-visits";

      if(USE_COUNTAPI){
        fetch(`https://api.countapi.xyz/hit/${encodeURIComponent(NAMESPACE)}/${encodeURIComponent(KEY)}`)
          .then(r=>r.json())
          .then(j=>{
            if(j && typeof j.value==="number"){
              visitText.textContent = "ì´ ë°©ë¬¸: " + j.value;
            }
          })
          .catch(()=>{});
      }
    })();

    // -----------------------------
    // ì‹œì‘
    // -----------------------------
    loadAndRender();

    // -----------------------------
    // service worker ë“±ë¡ (ìˆìœ¼ë©´)
    // -----------------------------
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js').catch(()=>{});
      });
    }
  </script>
</body>
</html>
