<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>복지관2층매장</title>

<style>
body{margin:0;background:#f2f3f5;font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR",sans-serif}
.tabs{display:flex;gap:8px;padding:12px}
.tab{flex:1;text-align:center;padding:14px;border-radius:14px;font-weight:900;background:#eee;cursor:pointer}
.tab.active{background:#2563eb;color:#fff}

.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:12px;padding-bottom:140px}
.card{background:#fff;border-radius:18px;padding:18px;box-shadow:0 4px 10px rgba(0,0,0,.05)}

.model{font-size:15px;font-weight:900;margin-bottom:6px}
.price-phone{font-size:38px;font-weight:900;color:#ef4444}
.price-tv{font-size:32px;font-weight:900;color:#ef4444}
.price-mvno{font-size:42px;font-weight:900;color:#ef4444}

.sub{font-size:13px;color:#555;margin-top:4px;font-weight:700}

.footer{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #ddd}
.footer-msg{text-align:center;font-weight:800;padding:6px}
.footer-store{text-align:center;font-size:17px;font-weight:900}
.footer-actions{display:grid;grid-template-columns:1fr 1fr 1fr}
.footer-actions a{padding:16px 0;text-align:center;font-weight:900;color:#000;text-decoration:none}
.call{background:#22c55e;color:#fff}
.sms{background:#38bdf8;color:#fff}
.kakao{background:#fee500}
</style>
</head>

<body>

<div class="tabs">
  <div class="tab active" data-tab="PHONE">휴대폰</div>
  <div class="tab" data-tab="INTV">인터넷TV</div>
  <div class="tab" data-tab="MVNO">알뜰요금</div>
</div>

<div class="grid" id="grid"></div>

<div class="footer">
  <div class="footer-msg">액정필름 무료교체 (카톡주문필수)</div>
  <div class="footer-store">복지관2층매장</div>
  <div class="footer-actions">
    <a class="call" href="tel:042-821-2272">전화</a>
    <a class="sms" href="sms:010-5839-1512">문자</a>
    <a class="kakao" href="https://open.kakao.com/o/s729bI5h">카톡</a>
  </div>
</div>

<script>
const grid=document.getElementById('grid')
const tabs=document.querySelectorAll('.tab')
let rows=[]

fetch('data.csv?v='+Date.now()).then(r=>r.text()).then(t=>{
  const l=t.trim().split('\n')
  const h=l.shift().split(',')
  rows=l.map(v=>{
    const c=v.split(',')
    let o={}
    h.forEach((k,i)=>o[k]=c[i]||'')
    return o
  })
  render('PHONE')
})

tabs.forEach(t=>t.onclick=()=>{
  tabs.forEach(x=>x.classList.remove('active'))
  t.classList.add('active')
  render(t.dataset.tab)
})

function render(type){
  grid.innerHTML=''
  rows.filter(r=>r.type===type).forEach(r=>{
    if(type==='PHONE'){
      const m=r.display_price.match(/이동\s*([-\d]+).*기변\s*([-\d]+)/)
      if(!m)return
      grid.innerHTML+=phoneCard(r.carrier,r.title,m[1],'번호이동')
      grid.innerHTML+=phoneCard(r.carrier,r.title,m[2],'기기변경')
    }
    if(type==='INTV'){
      grid.innerHTML+=`
      <div class="card">
        <div class="model">[${r.carrier}] ${r.title}</div>
        <div class="price-tv">${r.note}</div>
        <div class="sub">${r.display_price}</div>
        <div class="sub">설치비 별도</div>
      </div>`
    }
    if(type==='MVNO'){
      const p=r.display_price.replace(/[^0-9]/g,'')
      grid.innerHTML+=`
      <div class="card">
        <div class="model">[${r.carrier}] ${r.title}</div>
        <div class="price-mvno">${p}</div>
        <div class="sub">가입비 / 유심비 없음</div>
      </div>`
    }
  })
}

function phoneCard(carrier,title,price,label){
  const cond={
    SK:'SK 109요금 6개월 · 부가별도문의',
    KT:'KT 110요금 6개월 · 부가별도문의',
    LG:'LG 115요금 6개월 · 부가별도문의'
  }[carrier]
  return`
  <div class="card">
    <div class="model">[${carrier}] ${title}</div>
    <div class="price-phone">${price}</div>
    <div class="sub">${label}</div>
    <div class="sub">${cond}</div>
  </div>`
}
</script>
</body>
</html>
