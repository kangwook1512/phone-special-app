<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ë³µì§€ê´€2ì¸µë§¤ì¥</title>

<style>
:root{
  --bg:#f5f6f8; --card:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e5e7eb;
  --sk:#2563eb; --kt:#111827; --lg:#16a34a; --hot:#f97316; --low:#7c3aed;
  --call:#22c55e; --sms:#38bdf8; --kakao:#fee500;
}
*{box-sizing:border-box;}
html,body{margin:0;padding:0;}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR",system-ui,sans-serif;
  background:var(--bg); color:var(--ink);
}
.wrap{max-width:760px;margin:0 auto;padding:14px 14px 164px;}

.hero{
  background:#ffe866;border:2px solid #ffeb3b;border-radius:14px;
  padding:14px;text-align:center;font-weight:900;
  box-shadow:0 6px 16px rgba(0,0,0,.08);
}
.hero .sub{margin-top:6px;font-weight:800;font-size:14px;}
.hero .sub b{text-decoration:underline;}

.tabs{display:flex;gap:8px;margin-top:14px;}
.tabBtn{
  flex:1;padding:12px 0;border-radius:999px;border:1px solid var(--line);
  background:#fff;font-weight:1000;font-size:14px;cursor:pointer;
}
.tabBtn.active{color:#fff;border-color:transparent;}
.tabBtn.sk.active{background:var(--sk);}
.tabBtn.kt.active{background:var(--kt);}
.tabBtn.lg.active{background:var(--lg);}
.tabBtn.hot.active{background:var(--hot);}
.tabBtn.low.active{background:var(--low);}

.panel{
  margin-top:14px;background:#fff;border:1px solid var(--line);
  border-radius:16px;padding:14px;
}

.list{display:flex;flex-direction:column;gap:10px;}
.card{
  border:1px solid var(--line);border-radius:14px;padding:12px;
  box-shadow:0 2px 10px rgba(0,0,0,.05);
}
.titleRow{display:flex;justify-content:space-between;margin-bottom:8px;}
.model{font-weight:1000;font-size:16px;}
.badge{
  font-size:12px;font-weight:1000;padding:6px 10px;border-radius:999px;color:#fff;
}
.badge.sk{background:var(--sk);}
.badge.kt{background:var(--kt);}
.badge.lg{background:var(--lg);}
.badge.hot{background:var(--hot);}
.badge.low{background:var(--low);}

.infoLine{font-size:12px;font-weight:1000;color:var(--muted);margin-bottom:8px;}

.priceRow{display:flex;gap:10px;}
.pill{
  flex:1;border:1px solid var(--line);border-radius:12px;
  padding:10px;text-align:center;background:#fafafa;
}
.pill .k{font-size:12px;color:var(--muted);font-weight:1000;}
.pill .v{font-size:20px;font-weight:1000;}
.neg{color:#dc2626;}
.zero{color:#0ea5e9;}
.pos{color:#0f172a;}

.fixedNotice{
  position:fixed;left:0;right:0;bottom:60px;
  background:#fff;border-top:1px solid var(--line);
  text-align:center;font-weight:1000;padding:10px;
}
.bottomBar{
  position:fixed;left:0;right:0;bottom:0;height:60px;
  display:flex;border-top:1px solid var(--line);background:#fff;
}
.action{
  flex:1;display:flex;align-items:center;justify-content:center;
  font-weight:1000;text-decoration:none;color:#000;
}
.action.call{background:var(--call);color:#fff;}
.action.sms{background:var(--sms);}
.action.kakao{background:var(--kakao);}
</style>
</head>

<body>
<div class="wrap">
  <div class="hero">
    ì¸í„°ë„·TVÂ·ì•Œëœ°ìš”ê¸ˆì€ ì¹´í†¡ë¬¸ì˜
    <div class="sub">ğŸª™ ì¸í„°ë„·TV : <b>í˜„ê¸ˆ ìµœëŒ€ ì§€ì›</b></div>
    <div class="sub">ğŸ”¥ ì•Œëœ°ìš”ê¸ˆ : <b>ìµœì €ìš”ê¸ˆ 3,300ì›~</b></div>
  </div>

  <div class="tabs">
    <button class="tabBtn sk active" data-tab="SK">SK</button>
    <button class="tabBtn kt" data-tab="KT">KT</button>
    <button class="tabBtn lg" data-tab="LG">LG</button>
    <button class="tabBtn hot" data-tab="HOT">í•«ë”œ</button>
    <button class="tabBtn low" data-tab="LOW">ì €ê°€</button>
  </div>

  <div class="panel">
    <div class="list" id="list"></div>
  </div>
</div>

<div class="fixedNotice">
  ì•¡ì •í•„ë¦„ ë¬´ë£Œêµì²´<br>ì¹´í†¡ ì£¼ë¬¸ í›„ ë³µì§€ê´€2ì¸µ ë§¤ì¥ ë°©ë¬¸
</div>

<div class="bottomBar">
  <a class="action call" href="tel:042-821-2272">ì „í™”</a>
  <a class="action sms" href="sms:010-5839-1512">ë¬¸ì</a>
  <a class="action kakao" href="https://open.kakao.com/o/s729bI5h" target="_blank">ì¹´í†¡</a>
</div>

<script>
const list=document.getElementById("list");

const asNum=x=>{
  const s=String(x??"").replace(/\u2212/g,"-").replace(/,/g,"").trim();
  if(s==="")return null;
  const n=Number(s); return isFinite(n)?n:null;
};
const vClass=n=>n<0?"neg":n===0?"zero":"pos";

const fixedInfoLine=c=>{
  if(c==="SK")return "SK 109ìš”ê¸ˆ 6ê°œì›” / ë¶€ê°€í•„ìˆ˜ ë¬¸ì˜";
  if(c==="KT")return "KT 110ìš”ê¸ˆ 6ê°œì›” / ë¶€ê°€í•„ìˆ˜ ë¬¸ì˜";
  return "LG 115ìš”ê¸ˆ 6ê°œì›” / ë¶€ê°€í•„ìˆ˜ ë¬¸ì˜";
};
const infoLineWithPlan=(c,x)=>{
  const p=asNum(x[`${c}_ìš”ê¸ˆì œ`]);
  return (p&&p>0)?`${c} ${p}ìš”ê¸ˆ 6ê°œì›” / ë¶€ê°€í•„ìˆ˜ ë¬¸ì˜`:fixedInfoLine(c);
};

function addCard({badgeText,badgeClass,model,move,change,infoText}){
  list.insertAdjacentHTML("beforeend",`
    <div class="card">
      <div class="titleRow">
        <div class="model">${model}</div>
        <div class="badge ${badgeClass}">${badgeText}</div>
      </div>
      <div class="infoLine">${infoText}</div>
      <div class="priceRow">
        ${move!==""?`<div class="pill"><div class="k">ì´ë™</div><div class="v ${vClass(asNum(move))}">${move}</div></div>`:""}
        ${change!==""?`<div class="pill"><div class="k">ê¸°ë³€</div><div class="v ${vClass(asNum(change))}">${change}</div></div>`:""}
      </div>
    </div>
  `);
}

async function fetchCSV(){
  const r=await fetch(`data.csv?v=${Date.now()}`,{cache:"no-store"});
  const t=await r.text();
  const rows=t.trim().split("\n").map(r=>r.split(","));
  const h=rows.shift();
  return rows.map(r=>{const o={};h.forEach((k,i)=>o[k]=r[i]??"");return o});
}

async function render(tab){
  list.innerHTML="";
  const items=(await fetchCSV()).filter(x=>x["ê¸°ì¢…"]);

  if(["SK","KT","LG"].includes(tab)){
    items.forEach(x=>{
      const mv=x[`${tab}_ì´ë™`]||"", ch=x[`${tab}_ê¸°ë³€`]||"";
      const hasMove=mv!=="", hasChange=ch!=="";
      if(!hasMove && !hasChange) return;

      addCard({
        badgeText:tab,
        badgeClass:tab.toLowerCase(),
        model:x["ê¸°ì¢…"],
        move:hasMove?mv:"",
        change:(!hasMove && hasChange)?ch:"",
        infoText:fixedInfoLine(tab)
      });
    });
    return;
  }

  if(tab==="HOT"){
    items.forEach(x=>{
      ["SK","KT","LG"].forEach(c=>{
        if(asNum(x[`${c}_ì´ë™`])<0||asNum(x[`${c}_ê¸°ë³€`])<0){
          addCard({
            badgeText:`í•«ë”œ ${c}`,
            badgeClass:"hot",
            model:x["ê¸°ì¢…"],
            move:x[`${c}_ì´ë™`]||"",
            change:"",
            infoText:infoLineWithPlan(c,x)
          });
        }
      });
    });
    return;
  }

  if(tab==="LOW"){
    items.forEach(x=>{
      ["SK","KT","LG"].forEach(c=>{
        const p=asNum(x[`${c}_ìš”ê¸ˆì œ`]);
        const lim=c==="SK"?109:c==="KT"?110:115;
        if(p&&p>0&&p<lim){
          addCard({
            badgeText:`ì €ê°€ ${c} (${p})`,
            badgeClass:"low",
            model:x["ê¸°ì¢…"],
            move:x[`${c}_ì´ë™`]||"",
            change:"",
            infoText:`${c} ${p}ìš”ê¸ˆ 6ê°œì›” / ë¶€ê°€í•„ìˆ˜ ë¬¸ì˜`
          });
        }
      });
    });
  }
}

document.querySelectorAll(".tabBtn").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll(".tabBtn").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    render(b.dataset.tab);
  };
});
render("SK");
</script>
</body>
</html>
