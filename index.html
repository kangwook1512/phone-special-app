<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ë³µì§€ê´€2ì¸µë§¤ì¥</title>

<style>
:root{
  --bg:#f5f6f8; --card:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e5e7eb;
  --sk:#2563eb; --kt:#111827; --lg:#16a34a; --hot:#f97316; --low:#7c3aed;
  --call:#22c55e; --sms:#38bdf8; --kakao:#fee500;

  /* âœ… LED íŒ”ë ˆíŠ¸(ìœ ì§€) */
  --ledBg:#070b12;
  --ledBg2:#0b1220;
  --ledBorder:rgba(255,255,255,.14);
  --ledGlow1:rgba(0,255,180,.35);
  --ledGlow2:rgba(255,60,60,.25);
  --ledText:#f8fffc;
  --ledText2:#b6ffcf;
}
*{box-sizing:border-box;}
html,body{margin:0;padding:0;}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR",system-ui,sans-serif;
  background:var(--bg); color:var(--ink);
}
.wrap{max-width:760px;margin:0 auto;padding:14px 14px 190px;} /* âœ… í•˜ë‹¨ ë„í¬ ì—¬ìœ  */

/* =========================
   âœ… (ìˆ˜ì •) ê´‘ê³ íŒ: ë†’ì´ ì¶•ì†Œ + ê³ ì • ë¬¸êµ¬
   ========================= */
.hero{
  border-radius:18px;
  overflow:hidden;
  position:relative;
  background:
    radial-gradient(900px 160px at 50% 0%, rgba(0,255,180,.10), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.05) 0%, rgba(0,0,0,.22) 100%),
    linear-gradient(90deg, var(--ledBg) 0%, var(--ledBg2) 50%, var(--ledBg) 100%);
  border:1px solid var(--ledBorder);
  box-shadow:
    0 14px 34px rgba(0,0,0,.18),
    0 0 0 2px rgba(255,255,255,.10);
}

.heroMarquee2{
  min-height: 52px;
  display:flex;
  align-items:center;
  padding:10px 12px;
  position:relative;
}
.heroMarquee2::before{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(circle, rgba(255,255,255,.08) 1px, transparent 1.9px);
  background-size: 8px 8px;
  opacity:.22;
  pointer-events:none;
}
.heroMarquee2::after{ content:none; }

.marqueeLine{
  width:100%;
  height:36px;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  padding:0 10px;
  border-radius:14px;
  background: rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  box-shadow: inset 0 12px 20px rgba(0,0,0,.34);
}
.marqueeInner{
  display:flex;
  width:100%;
  justify-content:center;
  white-space:nowrap;
  align-items:center;
  animation:none !important;
  transform:none !important;
}
.marqueeInner span{
  font-size:20px;
  font-weight:1000;
  letter-spacing:-.6px;
  color:var(--ledText);
  text-shadow:
    0 0 10px rgba(0,255,180,.55),
    0 0 18px rgba(0,255,180,.32),
    0 2px 14px rgba(0,0,0,.85);
  animation:none !important;
}

/* =========================
   âœ… íƒ­
   ========================= */
.tabs{display:flex;gap:8px;margin-top:14px;}
.tabBtn{
  flex:1;padding:12px 0;border-radius:999px;border:1px solid var(--line);
  background:#fff;font-weight:1000;font-size:14px;cursor:pointer;
}
.tabBtn.active{color:#fff;border-color:transparent;}
.tabBtn.sk.active{background:var(--sk);}
.tabBtn.kt.active{background:var(--kt);}
.tabBtn.lg.active{background:var(--lg);}
.tabBtn.deal.active{background:var(--hot);} /* âœ… íŠ¹ê°€ íƒ­ */

/* âœ… ìƒë‹¨ 2ê°œ íƒ­(ì•Œëœ°/ì¸í„°ë„·TV) */
.tabBtn.svc{font-size:15px;font-weight:1000;}
.tabBtn.svc.mvno.active{background:var(--lg);}
.tabBtn.svc.internet.active{background:var(--kt);}

.panel{margin-top:14px;background:#fff;border:1px solid var(--line);border-radius:16px;padding:14px;}

/* âœ… ìš”ì²­: ì•Œëœ°/ì¸í„°ë„· ì¹´ë“œ ë§ìœ¼ë‹ˆ 2ì—´ */
.list{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:10px;
}
@media (max-width: 420px){
  .list{ grid-template-columns:1fr; }
}

.card{
  border:1px solid var(--line);border-radius:14px;padding:12px;
  box-shadow:0 2px 10px rgba(0,0,0,.05);
}
.titleRow{display:flex;justify-content:space-between;margin-bottom:8px;gap:10px;align-items:center;}
.model{font-weight:1000;font-size:16px;letter-spacing:-.2px;}
.badge{
  font-size:12px;font-weight:1000;padding:6px 10px;border-radius:999px;color:#fff;
  white-space:nowrap;
}
.badge.sk{background:var(--sk);}
.badge.kt{background:var(--kt);}
.badge.lg{background:var(--lg);}
.badge.hot{background:var(--hot);}
.badge.low{background:var(--low);}

.infoLine{font-size:12px;font-weight:1000;color:var(--muted);margin:0 0 6px;}
.discountLine{font-size:12px;font-weight:1000;color:#2563eb;margin:0 0 8px;}

/* íœ´ëŒ€í° ì „ìš© pill */
.priceRow{display:flex;gap:10px;}
.pill{
  flex:1;border:1px solid var(--line);border-radius:12px;
  padding:10px;text-align:center;background:#fafafa;
}
.pill .k{font-size:12px;color:var(--muted);font-weight:1000;margin-bottom:4px;}
.pill .v{font-size:20px;font-weight:1000;letter-spacing:-.4px;}
.neg{color:#dc2626;}
.zero{color:#0ea5e9;}
.pos{color:#0f172a;}

/* âœ… ì•Œëœ°/ì¸í„°ë„· ì „ìš© */
.planLine{font-size:13px;font-weight:1000;letter-spacing:-.2px;margin:0 0 8px;color:#0f172a;line-height:1.25;}
.moneyRow{display:flex;justify-content:space-between;align-items:baseline;gap:10px;}
.moneyRow .label{font-size:12px;font-weight:1000;color:var(--muted);}
.moneyRow .val{font-size:22px;font-weight:1000;letter-spacing:-.4px;color:#0f172a;}
.moneyRow .val2{font-size:19px;font-weight:1000;letter-spacing:-.4px;color:#0f172a;}

/* =========================
   âœ… ì•Œëœ°/ì¸í„°ë„· ì²« ì¹´ë“œ: ì•ˆë‚´ ì¹´ë“œ ì „ìš©
   ========================= */
.infoCard{
  grid-column:1/-1;
  padding:14px 14px;
  border-radius:16px;
  background: linear-gradient(180deg, rgba(15,23,42,.04), rgba(15,23,42,.02));
}
.infoCard .big{
  font-size:18px;
  font-weight:1000;
  letter-spacing:-.3px;
  line-height:1.25;
  color:#0f172a;
  margin:0 0 8px;
}
.infoCard .big strong{ font-weight:1000; }
.infoCard .kakaoHint{
  margin-top:10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border-radius:14px;
  background:rgba(254,229,0,.28);
  border:1px solid rgba(254,229,0,.55);
}
.infoCard .kakaoHint .t{
  font-size:15px;
  font-weight:1000;
  color:#3b2f00;
  letter-spacing:-.2px;
}
.infoCard .kakaoHint a{
  text-decoration:none;
  font-weight:1000;
  font-size:14px;
  padding:9px 12px;
  border-radius:12px;
  background:#fff;
  border:1px solid rgba(15,23,42,.10);
  color:#0f172a;
}

/* âœ… (ì¶”ê°€) íŠ¹ê°€ íƒ­ ì„¹ì…˜ ë¼ë²¨ */
.section{
  grid-column:1/-1;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(15,23,42,.10);
  background: linear-gradient(180deg, rgba(15,23,42,.04), rgba(15,23,42,.02));
  margin:2px 2px 0;
}
.section .t{
  font-size:14px;
  font-weight:1000;
  letter-spacing:-.2px;
  color:#0f172a;
}
.section .s{
  font-size:12px;
  font-weight:1000;
  color:var(--muted);
}

/* =========================
   âœ… í•˜ë‹¨ ë„í¬(ì›ë³¸ ìœ ì§€)
   ========================= */
.bottomDock{
  position:fixed;
  left:12px;
  right:12px;
  bottom:calc(10px + env(safe-area-inset-bottom));
  height:60px;
  padding:8px;
  display:flex;
  gap:10px;
  border-radius:18px;

  background:rgba(255,255,255,.88);
  border:1px solid rgba(15,23,42,.10);
  box-shadow:0 14px 34px rgba(15,23,42,.14);
  backdrop-filter: blur(10px) saturate(160%);
  z-index:999;
}
.dockBtn{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  border-radius:14px;

  text-decoration:none;
  font-weight:1000;
  font-size:16px;
  letter-spacing:-.2px;

  border:1px solid rgba(15,23,42,.10);
  background:#fff;
  color:#0f172a;

  box-shadow:0 8px 18px rgba(15,23,42,.08);
  transform: translateY(0);
  transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
}
.dockBtn:active{
  transform: translateY(1px);
  box-shadow:0 6px 14px rgba(15,23,42,.10);
  filter: brightness(.98);
}
.dockBtn svg{
  width:20px;height:20px;
  stroke: currentColor;
  stroke-width:2.4;
  fill:none;
  stroke-linecap:round;
  stroke-linejoin:round;
}
.dockBtn.call{
  background:rgba(34,197,94,.12);
  border-color:rgba(34,197,94,.22);
  color:#0b3a22;
}
.dockBtn.sms{
  background:rgba(56,189,248,.12);
  border-color:rgba(56,189,248,.22);
  color:#083244;
}
.dockBtn.kakao{
  background:rgba(254,229,0,.35);
  border-color:rgba(254,229,0,.55);
  color:#3b2f00;
}

@media (prefers-reduced-motion: reduce){
  .dockBtn{transition:none!important;}
}
</style>
</head>

<body>
<div class="wrap">
  <!-- âœ… ê³ ì • ê°„íŒ(ë†’ì´ ì¶•ì†Œ) -->
  <div class="hero" aria-label="ê³µì§€">
    <div class="heroMarquee2">
      <div class="marqueeLine">
        <div class="marqueeInner">
          <span>ì•¡ì •í•„ë¦„ ë¬´ë£Œêµì²´ (ì¹´í†¡ì£¼ë¬¸)</span>
        </div>
      </div>
    </div>
  </div>

  <!-- âœ… ìƒë‹¨ 2ê°œ íƒ­: ì•Œëœ°ìš”ê¸ˆ / ì¸í„°ë„·TV -->
  <div class="tabs" id="serviceTabs" aria-label="ì„œë¹„ìŠ¤ íƒ­">
    <button class="tabBtn svc mvno" data-mode="MVNO">ì•Œëœ°ìš”ê¸ˆ</button>
    <button class="tabBtn svc internet" data-mode="INTERNET">ì¸í„°ë„·TV</button>
  </div>

  <!-- âœ… íœ´ëŒ€í° íƒ­ (í•«ë”œ+ì €ê°€ â†’ íŠ¹ê°€ 1íƒ­) -->
  <div class="tabs" id="phoneTabs" aria-label="íœ´ëŒ€í° íƒ­">
    <button class="tabBtn sk active" data-tab="SK">SK</button>
    <button class="tabBtn kt" data-tab="KT">KT</button>
    <button class="tabBtn lg" data-tab="LG">LG</button>
    <button class="tabBtn deal" data-tab="DEAL">íŠ¹ê°€</button>
  </div>

  <div class="panel">
    <div class="list" id="list"></div>
  </div>
</div>

<!-- âœ… í•˜ë‹¨ ë„í¬ -->
<div class="bottomDock" role="navigation" aria-label="ë¹ ë¥¸ ì—°ë½">
  <a class="dockBtn call" href="tel:042-821-2272" aria-label="ì „í™”">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.8 19.8 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.8 19.8 0 0 1 2.08 4.18 2 2 0 0 1 4.06 2h3a2 2 0 0 1 2 1.72c.12.9.32 1.77.6 2.6a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.48-1.12a2 2 0 0 1 2.11-.45c.83.28 1.7.48 2.6.6A2 2 0 0 1 22 16.92z"/>
    </svg>
    <span>ì „í™”</span>
  </a>

  <a class="dockBtn sms" href="sms:010-5839-1512" aria-label="ë¬¸ì">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/>
      <path d="M8 10h8"/>
      <path d="M8 14h5"/>
    </svg>
    <span>ë¬¸ì</span>
  </a>

  <a class="dockBtn kakao" href="https://open.kakao.com/o/s729bI5h" target="_blank" rel="noopener" aria-label="ì¹´í†¡">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M20 11c0 3.87-3.58 7-8 7a9.8 9.8 0 0 1-2.5-.33L4 20l1.66-4.15A6.3 6.3 0 0 1 4 11c0-3.87 3.58-7 8-7s8 3.13 8 7z"/>
      <path d="M9 11h.01"/>
      <path d="M12 11h.01"/>
      <path d="M15 11h.01"/>
    </svg>
    <span>ì¹´í†¡</span>
  </a>
</div>

<script>
const list = document.getElementById("list");
const phoneTabsEl = document.getElementById("phoneTabs");
const serviceTabsEl = document.getElementById("serviceTabs");

let mode = "PHONE";          // PHONE | MVNO | INTERNET
let lastPhoneTab = "SK";     // íœ´ëŒ€í° íƒ­ ë³µê·€ìš©

/* ìˆ«ì ë³€í™˜: ìœ ë‹ˆì½”ë“œ ë§ˆì´ë„ˆìŠ¤(âˆ’) + ì½¤ë§ˆ ì²˜ë¦¬ */
const asNum = (x) => {
  const s = String(x ?? "").replace(/\u2212/g, "-").replace(/,/g, "").trim();
  if (s === "") return null;
  const n = Number(s);
  return Number.isFinite(n) ? n : null;
};
const vClass = (n) => (n === null) ? "" : (n < 0 ? "neg" : (n === 0 ? "zero" : "pos"));
const showVal = (raw) => {
  const n = asNum(raw);
  if (n === null) return "";
  return String(raw).trim();
};

const limOf = (c) => (c==="SK") ? 109 : (c==="KT" ? 110 : 115);

const fixedInfoLine = (c) => {
  if (c === "SK") return "SK 109ìš”ê¸ˆ 6ê°œì›” / ë¶€ê°€í•„ìˆ˜ ë¬¸ì˜";
  if (c === "KT") return "KT 110ìš”ê¸ˆ 6ê°œì›” / ë¶€ê°€í•„ìˆ˜ ë¬¸ì˜";
  return "LG 115ìš”ê¸ˆ 6ê°œì›” / ë¶€ê°€í•„ìˆ˜ ë¬¸ì˜";
};
const infoLineWithPlan = (c, x) => {
  const p = asNum(x[`${c}_ìš”ê¸ˆì œ`]);
  return (p && p > 0) ? `${c} ${p}ìš”ê¸ˆ 6ê°œì›” / ë¶€ê°€í•„ìˆ˜ ë¬¸ì˜` : fixedInfoLine(c);
};

/* =========================
   âœ… íœ´ëŒ€í° ì¹´ë“œ
   ========================= */
function addPhoneCard({badgeText, badgeClass, model, move, change, infoText, discount}){
  const mvNum = asNum(move);
  const chNum = asNum(change);

  list.insertAdjacentHTML("beforeend", `
    <div class="card">
      <div class="titleRow">
        <div class="model">${model}</div>
        <div class="badge ${badgeClass}">${badgeText}</div>
      </div>
      ${infoText ? `<p class="infoLine">${infoText}</p>` : ``}
      ${discount ? `<p class="discountLine">ìš”ê¸ˆí• ì¸ 25% ê°€ëŠ¥</p>` : ``}
      <div class="priceRow">
        ${move !== "" ? `
          <div class="pill">
            <div class="k">ì´ë™</div>
            <div class="v ${vClass(mvNum)}">${move}</div>
          </div>` : ``}
        ${change !== "" ? `
          <div class="pill">
            <div class="k">ê¸°ë³€</div>
            <div class="v ${vClass(chNum)}">${change}</div>
          </div>` : ``}
      </div>
    </div>
  `);
}

/* =========================
   âœ… ì•Œëœ°/ì¸í„°ë„· ì „ìš© ì¹´ë“œ
   ========================= */
function addSimpleCard({badgeText, badgeClass, line1, line2, price1Label, price1, price2Label, price2}){
  list.insertAdjacentHTML("beforeend", `
    <div class="card">
      <div class="titleRow">
        <div class="model">${line1}</div>
        <div class="badge ${badgeClass}">${badgeText}</div>
      </div>
      ${line2 ? `<p class="planLine">${line2}</p>` : ``}
      <div class="moneyRow">
        <div class="label">${price1Label}</div>
        <div class="val">${price1}</div>
      </div>
      ${price2 ? `
        <div class="moneyRow" style="margin-top:6px;">
          <div class="label">${price2Label}</div>
          <div class="val2">${price2}</div>
        </div>` : ``}
    </div>
  `);
}

/* =========================
   âœ… ì²« ì¹´ë“œ: ì•ˆë‚´ ì¹´ë“œ(ì›”/ê²°í•© ì—†ìŒ)
   ========================= */
function addInfoCard({badgeText, badgeClass, title, lines, ctaText}){
  const safeLines = (lines || []).map(s => `<div>${s}</div>`).join("");
  list.insertAdjacentHTML("beforeend", `
    <div class="card infoCard">
      <div class="titleRow" style="margin-bottom:10px;">
        <div class="model">${title}</div>
        <div class="badge ${badgeClass}">${badgeText}</div>
      </div>
      <p class="big">${safeLines}</p>
      ${ctaText ? `
        <div class="kakaoHint">
          <div class="t">${ctaText}</div>
          <a href="https://open.kakao.com/o/s729bI5h" target="_blank" rel="noopener">ì¹´í†¡ ì—´ê¸°</a>
        </div>` : ``}
    </div>
  `);
}

/* âœ… (ì¶”ê°€) ì„¹ì…˜ ë¼ë²¨ */
function addSection(title, sub){
  list.insertAdjacentHTML("beforeend", `
    <div class="section">
      <div class="t">${title}</div>
      <div class="s">${sub || ""}</div>
    </div>
  `);
}

/* =========================
   âœ… ì¸í„°ë„·TV ë°ì´í„°
   ========================= */
const INTERNET_TV = [
  {carrier:"SK", net:"100M", tv:"ì—†ìŒ", monthly:"22,000", bundle:"17,600"},
  {carrier:"SK", net:"500M", tv:"ì—†ìŒ", monthly:"33,000", bundle:"22,000"},
  {carrier:"SK", net:"1G",   tv:"ì—†ìŒ", monthly:"38,500", bundle:"25,300"},
  {carrier:"SK", net:"100M", tv:"ë‰´ì´ì½”ë…¸ë¯¸", monthly:"34,100", bundle:"30,800"},
  {carrier:"SK", net:"100M", tv:"ìŠ¤íƒ ë‹¤ë“œ",   monthly:"37,400", bundle:"34,100"},
  {carrier:"SK", net:"100M", tv:"ALL",        monthly:"40,700", bundle:"37,400"},
  {carrier:"SK", net:"500M", tv:"ë‰´ì´ì½”ë…¸ë¯¸", monthly:"41,800", bundle:"35,200"},
  {carrier:"SK", net:"500M", tv:"ìŠ¤íƒ ë‹¤ë“œ",   monthly:"45,100", bundle:"38,500"},
  {carrier:"SK", net:"500M", tv:"ALL",        monthly:"48,400", bundle:"41,800"},
  {carrier:"SK", net:"1G",   tv:"ë‰´ì´ì½”ë…¸ë¯¸", monthly:"47,300", bundle:"38,500"},
  {carrier:"SK", net:"1G",   tv:"ìŠ¤íƒ ë‹¤ë“œ",   monthly:"50,600", bundle:"41,800"},
  {carrier:"SK", net:"1G",   tv:"ALL",        monthly:"53,900", bundle:"45,100"},

  {carrier:"KT", net:"100M", tv:"ì—†ìŒ", monthly:"22,000", bundle:"16,500"},
  {carrier:"KT", net:"500M", tv:"ì—†ìŒ", monthly:"33,000", bundle:"22,000"},
  {carrier:"KT", net:"1G",   tv:"ì—†ìŒ", monthly:"38,500", bundle:"27,500"},
  {carrier:"KT", net:"100M", tv:"ë² ì´ì§", monthly:"38,500", bundle:"33,000"},
  {carrier:"KT", net:"100M", tv:"ëª¨ë“ G", monthly:"44,000", bundle:"40,700"},
  {carrier:"KT", net:"500M", tv:"ë² ì´ì§", monthly:"44,000", bundle:"38,500"},
  {carrier:"KT", net:"500M", tv:"ëª¨ë“ G", monthly:"49,500", bundle:"44,000"},
  {carrier:"KT", net:"1G",   tv:"ë² ì´ì§", monthly:"49,500", bundle:"44,000"},
  {carrier:"KT", net:"1G",   tv:"ëª¨ë“ G", monthly:"55,000", bundle:"49,500"},

  {carrier:"LG", net:"100M", tv:"ì—†ìŒ", monthly:"22,000", bundle:"16,500"},
  {carrier:"LG", net:"500M", tv:"ì—†ìŒ", monthly:"33,000", bundle:"23,100"},
  {carrier:"LG", net:"1G",   tv:"ì—†ìŒ", monthly:"38,500", bundle:"25,300"},
  {carrier:"LG", net:"100M", tv:"ì‹¤ì†í˜•", monthly:"39,600", bundle:"34,100"},
  {carrier:"LG", net:"100M", tv:"í”„ë¦¬ë¯¸ì—„", monthly:"42,900", bundle:"37,400"},
  {carrier:"LG", net:"500M", tv:"ì‹¤ì†í˜•", monthly:"45,100", bundle:"35,200"},
  {carrier:"LG", net:"500M", tv:"í”„ë¦¬ë¯¸ì—„", monthly:"48,400", bundle:"38,500"},
  {carrier:"LG", net:"1G",   tv:"ì‹¤ì†í˜•", monthly:"50,600", bundle:"37,400"},
  {carrier:"LG", net:"1G",   tv:"í”„ë¦¬ë¯¸ì—„", monthly:"53,900", bundle:"40,700"},
];

/* =========================
   âœ… ì•Œëœ°ìš”ê¸ˆ ë°ì´í„°(ì „ì²´ ì…ë ¥ë³¸)
   ========================= */
const MVNO_PLANS = [
  {net:"LG", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"1GB+1Mbpsë¬´ì œí•œ", fee:"9,900"},
  {net:"LG", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"7GB+1Mbpsë¬´ì œí•œ", fee:"15,900"},
  {net:"LG", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"10GB+1Mbpsë¬´ì œí•œ", fee:"18,900"},
  {net:"LG", talk:"100ë¶„",  sms:"100ê±´",  data:"15GB+3Mbpsë¬´ì œí•œ", fee:"25,250"},
  {net:"LG", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"11GB+ì¼2GB+3Mbpsë¬´ì œí•œ", fee:"32,990"},
  {net:"LG", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"100GB+5Mbpsë¬´ì œí•œ", fee:"38,200"},
  {net:"LG", talk:"50ë¶„",   sms:"50ê±´",   data:"500MB", fee:"3,300"},
  {net:"LG", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"1GB+1Mbpsë¬´ì œí•œ", fee:"12,900"},
  {net:"LG", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"5GB+1Mbpsë¬´ì œí•œ", fee:"17,500"},
  {net:"LG", talk:"100ë¶„",  sms:"100ê±´",  data:"15GB+ë§ë‚´1íšŒì„ +3Mbpsë¬´ì œí•œ", fee:"28,820"},

  {net:"KT", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"2.5GB+400Kbpsë¬´ì œí•œ", fee:"9,500"},
  {net:"KT", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"7GB+1Mbpsë¬´ì œí•œ", fee:"17,900"},
  {net:"KT", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"10GB+1Mbpsë¬´ì œí•œ", fee:"19,900"},
  {net:"KT", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"15GB+1Mbpsë¬´ì œí•œ", fee:"22,400"},
  {net:"KT", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"11GB+ì¼2GB+3Mbpsë¬´ì œí•œ", fee:"34,000"},
  {net:"KT", talk:"ë¬´ì œí•œ", sms:"ë¬´ì œí•œ", data:"100GB+5Mbpsë¬´ì œí•œ", fee:"39,900"},

  {net:"SK", talk:"2,000ë¶„", sms:"2,000ê±´", data:"2GB", fee:"6,820"},
  {net:"SK", talk:"ë¬´ì œí•œ",  sms:"ë¬´ì œí•œ",  data:"1GB+1Mbpsë¬´ì œí•œ", fee:"13,340"},
  {net:"SK", talk:"ë¬´ì œí•œ",  sms:"ë¬´ì œí•œ",  data:"7GB+1Mbpsë¬´ì œí•œ", fee:"19,140"},
  {net:"SK", talk:"ë¬´ì œí•œ",  sms:"ë¬´ì œí•œ",  data:"10GB+1Mbpsë¬´ì œí•œ", fee:"19,640"},
  {net:"SK", talk:"100ë¶„",   sms:"100ê±´",   data:"15GB+3Mbpsë¬´ì œí•œ", fee:"25,740"},
  {net:"SK", talk:"ë¬´ì œí•œ",  sms:"ë¬´ì œí•œ",  data:"11GB+ì¼2GB+3Mbpsë¬´ì œí•œ", fee:"36,140"},
];

/* =========================
   âœ… ëª¨ë“œ ì „í™˜ / ë Œë”
   ========================= */
function setServiceActive(next){
  serviceTabsEl.querySelectorAll(".tabBtn").forEach(b => b.classList.remove("active"));
  if (next === "MVNO") serviceTabsEl.querySelector('[data-mode="MVNO"]').classList.add("active");
  if (next === "INTERNET") serviceTabsEl.querySelector('[data-mode="INTERNET"]').classList.add("active");
}
function clearList(){ list.innerHTML = ""; }

/* ===== CSV íœ´ëŒ€í° ===== */
async function fetchCSV(){
  const r = await fetch(`data.csv?v=${Date.now()}`, { cache: "no-store" });
  if (!r.ok) throw new Error("data.csv ë¡œë“œ ì‹¤íŒ¨");
  const t = await r.text();

  const lines = t.replace(/^\uFEFF/,"").trim().split(/\r?\n/);
  if (!lines.length) return [];
  const header = lines.shift().split(",").map(s => s.trim());

  return lines.map(line => {
    const cols = line.split(",");
    const o = {};
    header.forEach((h,i)=> o[h] = (cols[i] ?? "").trim());
    return o;
  });
}

async function renderPhone(tab){
  mode = "PHONE";
  setServiceActive(null);

  clearList();
  let items = [];
  try{
    items = (await fetchCSV()).filter(x => String(x["ê¸°ì¢…"] ?? "").trim() !== "");
  }catch(e){
    list.insertAdjacentHTML("beforeend", `<p class="infoLine">CSV íŒŒì¼ì„ ì½ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. (data.csv íŒŒì¼ëª…/ìœ„ì¹˜ í™•ì¸)</p>`);
    return;
  }
  if (!items.length){
    list.insertAdjacentHTML("beforeend", `<p class="infoLine">í‘œì‹œí•  í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</p>`);
    return;
  }

  const discountOf = (x) => String(x["ìš”ê¸ˆí• ì¸"] || "").trim().toUpperCase() === "O";

  /* ===== í†µì‹ ì‚¬ íƒ­ ===== */
  if (["SK","KT","LG"].includes(tab)){
    const lim = limOf(tab);

    items.forEach(x=>{
      const plan = asNum(x[`${tab}_ìš”ê¸ˆì œ`]);
      if (plan !== null && plan > 0 && plan !== lim) return;

      const mv = showVal(x[`${tab}_ì´ë™`]);
      const ch = showVal(x[`${tab}_ê¸°ë³€`]);
      if (mv === "" && ch === "") return;

      const mvFinal = (mv !== "") ? mv : "ë¬¸ì˜";
      const chFinal = (ch !== "") ? ch : "ë¬¸ì˜";

      addPhoneCard({
        badgeText: tab,
        badgeClass: tab.toLowerCase(),
        model: x["ê¸°ì¢…"],
        move: mvFinal,
        change: chFinal,
        infoText: fixedInfoLine(tab),
        discount: discountOf(x)
      });
    });
    return;
  }

  /* ===== íŠ¹ê°€ íƒ­ (í•«ë”œ + ì €ê°€) =====
     - í•«ë”œ: ì´ë™/ê¸°ë³€ ê°’ì´ 0 ì´í•˜(<=0) í¬í•¨
     - ì €ê°€: ìš”ê¸ˆì œ lim ë¯¸ë§Œ
     - ì¤‘ë³µ ë°©ì§€: í•«ë”œë¡œ ë‚˜ì˜¨ (ê¸°ì¢…+í†µì‹ ì‚¬) ì¡°í•©ì€ ì €ê°€ì—ì„œ ì œì™¸
  */
  if (tab === "DEAL"){
    const shown = new Set(); // key: `${ê¸°ì¢…}__${í†µì‹ ì‚¬}`

    // 1) í•«ë”œ ì„¹ì…˜
    addSection("ğŸ”¥ í•«ë”œ", "0ì›/ë§ˆì´ë„ˆìŠ¤ í¬í•¨");
    let hotCount = 0;

    items.forEach(x=>{
      ["SK","KT","LG"].forEach(c=>{
        const rawMv = x[`${c}_ì´ë™`] ?? "";
        const rawCh = x[`${c}_ê¸°ë³€`] ?? "";
        const mvNum = asNum(rawMv);
        const chNum = asNum(rawCh);

        // âœ… 0 í¬í•¨: <= 0
        const isHot = (mvNum !== null && mvNum <= 0) || (chNum !== null && chNum <= 0);
        if (!isHot) return;

        // í•«ë”œì€ í•´ë‹¹ ê°’ë§Œ ë³´ì—¬ì£¼ê³ (ë‘˜ ë‹¤ 0/ìŒìˆ˜ë©´ ë‘˜ ë‹¤), ì•„ë‹ˆë©´ ë¹ˆì¹¸
        const mv = (mvNum !== null && mvNum <= 0) ? showVal(rawMv) : "";
        const ch = (chNum !== null && chNum <= 0) ? showVal(rawCh) : "";
        if (mv === "" && ch === "") return;

        const key = `${String(x["ê¸°ì¢…"]||"").trim()}__${c}`;
        shown.add(key);
        hotCount++;

        addPhoneCard({
          badgeText: `í•«ë”œ ${c}`,
          badgeClass: "hot",
          model: x["ê¸°ì¢…"],
          move: mv,
          change: ch,
          infoText: infoLineWithPlan(c, x),
          discount: discountOf(x)
        });
      });
    });

    if (hotCount === 0){
      list.insertAdjacentHTML("beforeend", `<p class="infoLine" style="grid-column:1/-1;margin:6px 2px 10px;">í˜„ì¬ í•«ë”œ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</p>`);
    }

    // 2) ì €ê°€ ì„¹ì…˜
    addSection("ğŸ’¸ ì €ê°€ìš”ê¸ˆ", "ê¸°ì¤€ìš”ê¸ˆ ë¯¸ë§Œ");
    let lowCount = 0;

    items.forEach(x=>{
      ["SK","KT","LG"].forEach(c=>{
        const key = `${String(x["ê¸°ì¢…"]||"").trim()}__${c}`;
        if (shown.has(key)) return; // âœ… ì¤‘ë³µ ì œê±°(í•«ë”œ ìš°ì„ )

        const p = asNum(x[`${c}_ìš”ê¸ˆì œ`]);
        const lim = limOf(c);
        if (!(p !== null && p > 0 && p < lim)) return;

        const mv = showVal(x[`${c}_ì´ë™`]);
        const ch = showVal(x[`${c}_ê¸°ë³€`]);
        if (mv === "" && ch === "") return;

        lowCount++;

        addPhoneCard({
          badgeText: `ì €ê°€ ${c} (${p})`,
          badgeClass: "low",
          model: x["ê¸°ì¢…"],
          move: mv,
          change: ch,
          infoText: `${c} ${p}ìš”ê¸ˆ 6ê°œì›” / ë¶€ê°€í•„ìˆ˜ ë¬¸ì˜`,
          discount: discountOf(x)
        });
      });
    });

    if (lowCount === 0){
      list.insertAdjacentHTML("beforeend", `<p class="infoLine" style="grid-column:1/-1;margin:6px 2px 0;">í˜„ì¬ ì €ê°€ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</p>`);
    }
    return;
  }
}

/* ===== ì¸í„°ë„·TV ===== */
function renderInternet(){
  mode = "INTERNET";
  setServiceActive("INTERNET");
  clearList();

  addInfoCard({
    badgeText:"ì•ˆë‚´",
    badgeClass:"kt",
    title:"ì¸í„°ë„·TV",
    lines:[
      "<strong>í˜„ê¸ˆì§€ì›ê¸ˆ</strong> ì¹´í†¡ë¬¸ì˜",
      "ê²°í•© ì‹œ <strong>ìš”ê¸ˆ í• ì¸</strong>"
    ],
    ctaText:"ê¶ê¸ˆí•˜ì‹  ì ì€ ì¹´í†¡ë¬¸ì˜"
  });

  const sorted = INTERNET_TV
    .slice()
    .sort((a,b)=> (asNum(a.monthly)||0) - (asNum(b.monthly)||0));

  sorted.forEach(x=>{
    const badgeClass = (x.carrier === "SK") ? "sk" : (x.carrier === "KT" ? "kt" : "lg");
    addSimpleCard({
      badgeText: x.carrier,
      badgeClass,
      line1: `[ ${x.carrier} ]`,
      line2: `${x.net} Â· TV${x.tv}`,
      price1Label: "ì›”",
      price1: x.monthly,
      price2Label: "ê²°í•©",
      price2: x.bundle
    });
  });
}

/* ===== ì•Œëœ°ìš”ê¸ˆ ===== */
function renderMVNO(){
  mode = "MVNO";
  setServiceActive("MVNO");
  clearList();

  addInfoCard({
    badgeText:"í•„ë…",
    badgeClass:"lg",
    title:"ì•Œëœ°ìš”ê¸ˆ",
    lines:[
      "ê°€ì…ë¹„ Â· ìœ ì‹¬ë¹„",
      "<strong>ì¶”ê°€ìš”ê¸ˆ ì—†ìŒ</strong>"
    ],
    ctaText:"ê¶ê¸ˆí•˜ì‹ ì ì€ ì¹´í†¡ë¬¸ì˜"
  });

  const sorted = MVNO_PLANS
    .slice()
    .sort((a,b)=> (asNum(a.fee)||0) - (asNum(b.fee)||0));

  sorted.forEach(p=>{
    const badgeClass = (p.net === "SK") ? "sk" : (p.net === "KT" ? "kt" : "lg");
    addSimpleCard({
      badgeText: p.net,
      badgeClass,
      line1: `${p.net}ë§ ì•Œëœ°ìš”ê¸ˆ`,
      line2: `${p.data} / í†µí™” ${p.talk} / ë¬¸ì ${p.sms}`,
      price1Label: "ì›”",
      price1: p.fee,
      price2Label: "",
      price2: ""
    });
  });
}

/* =========================
   âœ… íƒ­ UI active ì²˜ë¦¬
   ========================= */
function activatePhoneTab(tab){
  phoneTabsEl.querySelectorAll(".tabBtn").forEach(b=>{
    b.classList.toggle("active", b.dataset.tab === tab);
  });
  lastPhoneTab = tab;
}

/* =========================
   âœ… ì´ë²¤íŠ¸ ë°”ì¸ë”©
   ========================= */
phoneTabsEl.querySelectorAll(".tabBtn").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    const tab = btn.dataset.tab;
    activatePhoneTab(tab);
    serviceTabsEl.querySelectorAll(".tabBtn").forEach(b => b.classList.remove("active"));
    renderPhone(tab);
  });
});

serviceTabsEl.querySelectorAll(".tabBtn").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    const next = btn.dataset.mode;
    if (mode === next){
      serviceTabsEl.querySelectorAll(".tabBtn").forEach(b => b.classList.remove("active"));
      activatePhoneTab(lastPhoneTab);
      renderPhone(lastPhoneTab);
      return;
    }
    if (next === "MVNO") renderMVNO();
    if (next === "INTERNET") renderInternet();
  });
});

/* ìµœì´ˆ ë Œë”: íœ´ëŒ€í°(SK) */
activatePhoneTab("SK");
renderPhone("SK");
</script>
</body>
</html>
