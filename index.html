<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ğŸ” Google ê²€ìƒ‰ ìµœì í™” -->
  <title>ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° íŠ¹íŒ ì•ˆë‚´ | SKÂ·KTÂ·LG Â· ì¸í„°ë„·TV Â· ì•Œëœ°ìš”ê¸ˆ</title>
  <meta name="description" content="ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° ë§¤ì¥ íŠ¹íŒ ì „ìš© ì‚¬ì´íŠ¸. SKÂ·KTÂ·LG íœ´ëŒ€í° íŠ¹íŒ, ì¸í„°ë„·Â·TV í˜„ê¸ˆ ì§€ì›, ì•Œëœ°ìš”ê¸ˆ 3,300ì›~ ì‹¤ì‹œê°„ ì•ˆë‚´." />
  <link rel="canonical" href="https://a2272a.github.io/" />
  <meta name="robots" content="index,follow" />
  <meta name="keywords" content="ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í°, íœ´ëŒ€í° íŠ¹íŒ, ì•Œëœ°ìš”ê¸ˆ 3300ì›, íœ´ëŒ€í° ì„±ì§€, ì—°êµ¬ì†Œ íœ´ëŒ€í°, ì¸í„°ë„· TV í˜„ê¸ˆì§€ì›" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js').catch(()=>{});
      });
    }
  </script>

  <style>
    :root{
      --bg:#f4fbff;
      --ink:#0b1220;
      --sub:#334155;

      --skt:#ff3b4a;
      --kt:#111827;
      --lg:#c026d3;
      --internet:#f97316;
      --mvno:#16a34a;

      --blue:#0ea5e9;
      --blue2:#2563eb;

      --radius:24px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,'Noto Sans KR',sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 450px at 10% 0%, rgba(14,165,233,0.18) 0%, rgba(14,165,233,0) 55%),
        radial-gradient(900px 420px at 95% 22%, rgba(34,197,94,0.12) 0%, rgba(34,197,94,0) 60%),
        linear-gradient(180deg, #ffffff 0%, var(--bg) 35%, #ffffff 100%);
    }
    .app{width:100%;min-height:100vh;display:flex;flex-direction:column;}
    @media(min-width:1100px){
      .app{
        max-width:1100px;
        margin:18px auto;
        border-radius:28px;
        overflow:hidden;
        background:#fff;
        box-shadow:0 26px 60px rgba(15,23,42,0.14);
      }
    }
    .hero{
      padding:18px 18px 16px;
      background:
        radial-gradient(1000px 420px at 15% 0%, rgba(14,165,233,0.22) 0%, rgba(14,165,233,0) 60%),
        linear-gradient(180deg, #ffffff 0%, #f0fbff 100%);
      border-bottom:1px solid rgba(15,23,42,0.08);
    }
    .hero-title{
      margin:0;
      font-size:32px;
      font-weight:1000;
      letter-spacing:-0.06em;
      line-height:1.06;
    }
    .hero-sub{
      margin:8px 0 0;
      font-size:15px;
      font-weight:900;
      color:var(--sub);
    }

    .tab-bar{
      position:sticky; top:0; z-index:30;
      background:rgba(255,255,255,0.94);
      backdrop-filter:saturate(180%) blur(10px);
      border-bottom:1px solid rgba(15,23,42,0.08);
      padding:10px 12px 12px;
    }
    .tabs{display:flex;gap:10px;flex-wrap:wrap}
    .tab-btn{
      flex:1; min-width:120px;
      border:none;cursor:pointer;
      padding:14px 10px;border-radius:999px;
      font-size:15px;font-weight:1000;
      background:#fff;color:#0b1220;
      border:1px solid rgba(15,23,42,0.10);
      box-shadow:0 12px 22px rgba(15,23,42,0.08);
    }
    .tab-btn.active{
      background:linear-gradient(135deg, var(--blue) 0%, var(--blue2) 100%);
      color:#fff;
      box-shadow:0 18px 30px rgba(37,99,235,0.22);
    }

    .content{padding:14px 14px 34px}
    .tab-panel{display:none}
    .tab-panel.active{display:block}

    /* cards */
    .grid{
      display:grid;
      grid-template-columns: repeat(1, minmax(0, 1fr));
      gap:12px;
    }
    @media(min-width:680px){
      .grid{grid-template-columns: repeat(2, minmax(0, 1fr));}
    }
    @media(min-width:980px){
      .grid{grid-template-columns: repeat(3, minmax(0, 1fr));}
    }
    .card{
      border-radius:22px;
      background:#fff;
      border:1px solid rgba(15,23,42,0.10);
      box-shadow:0 18px 34px rgba(15,23,42,0.10);
      overflow:hidden;
    }
    .card-top{
      padding:14px 14px 10px;
      border-bottom:1px solid rgba(15,23,42,0.06);
      background:linear-gradient(180deg, rgba(14,165,233,0.10) 0%, rgba(255,255,255,0) 100%);
    }
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .title{
      margin:0;
      font-size:18px;
      font-weight:1000;
      letter-spacing:-0.02em;
    }
    .tag{
      font-size:13px;
      font-weight:900;
      color:var(--sub);
      white-space:nowrap;
    }
    .price{
      padding:12px 14px 14px;
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
    }
    .price strong{
      font-size:24px;
      font-weight:1000;
      letter-spacing:-0.03em;
    }
    .price small{
      font-size:13px;
      font-weight:900;
      color:var(--sub);
    }
    .badges{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      padding:0 14px 14px;
    }
    .badge{
      font-size:12px;
      font-weight:1000;
      padding:8px 10px;
z
      border-radius:999px;
      border:1px solid rgba(15,23,42,0.10);
      background:rgba(15,23,42,0.03);
    }
    .accent{
      height:6px;
      background:linear-gradient(90deg, var(--blue), var(--blue2));
    }
    .accent.skt{background:linear-gradient(90deg, var(--skt), #ff7a7a);}
    .accent.kt{background:linear-gradient(90deg, var(--kt), #475569);}
    .accent.lg{background:linear-gradient(90deg, var(--lg), #fb7185);}
    .accent.internet{background:linear-gradient(90deg, var(--internet), #fb923c);}
    .accent.mvno{background:linear-gradient(90deg, var(--mvno), #4ade80);}

    .priceType-free strong{color:#111827;}
    .priceType-minus strong{color:#dc2626;}
    .priceType-cash strong{color:#0f766e;}

    .empty{
      padding:18px;
      border-radius:18px;
      border:1px dashed rgba(15,23,42,0.20);
      color:var(--sub);
      font-weight:900;
      background:rgba(255,255,255,0.7);
    }
  </style>
</head>

<body>
  <!-- ê²€ìƒ‰ ë³´ê°•ìš© ìˆ¨ê¹€ í…ìŠ¤íŠ¸ -->
  <div style="display:none">ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° ë§¤ì¥ íŠ¹íŒ ì „ìš© ì‚¬ì´íŠ¸</div>

  <div class="app">
    <header class="hero">
      <h1 class="hero-title">ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° íŠ¹íŒ ì•ˆë‚´</h1>
      <div class="hero-sub">SKÂ·KTÂ·LG / ì¸í„°ë„·Â·TV í˜„ê¸ˆ ìµœëŒ€ì§€ì› / ì•Œëœ°ìš”ê¸ˆ 3,300ì›~</div>
    </header>

    <div class="tab-bar">
      <div class="tabs">
        <button class="tab-btn active" data-tab="skt">SKT</button>
        <button class="tab-btn" data-tab="kt">KT</button>
        <button class="tab-btn" data-tab="lg">LGU+</button>
        <button class="tab-btn" data-tab="internet">ì¸í„°ë„·Â·TV</button>
        <button class="tab-btn" data-tab="mvno">ì•Œëœ°ìš”ê¸ˆ</button>
      </div>
    </div>

    <main class="content">
      <section class="tab-panel active" data-panel="skt"><div id="list-skt" class="grid"></div></section>
      <section class="tab-panel" data-panel="kt"><div id="list-kt" class="grid"></div></section>
      <section class="tab-panel" data-panel="lg"><div id="list-lg" class="grid"></div></section>
      <section class="tab-panel" data-panel="internet"><div id="list-internet" class="grid"></div></section>
      <section class="tab-panel" data-panel="mvno"><div id="list-mvno" class="grid"></div></section>
    </main>
  </div>

  <script>
    // íƒ­
    const tabs=document.querySelectorAll(".tab-btn");
    const panels=document.querySelectorAll(".tab-panel");
    tabs.forEach(b=>b.onclick=()=>{
      tabs.forEach(x=>x.classList.remove("active"));
      panels.forEach(p=>p.classList.remove("active"));
      b.classList.add("active");
      document.querySelector(`[data-panel="${b.dataset.tab}"]`).classList.add("active");
      window.scrollTo({top:0,behavior:"smooth"});
    });

    // CSV íŒŒì„œ (ë”°ì˜´í‘œ/ì½¤ë§ˆ ëŒ€ì‘)
    function parseCSV(text){
      const rows = [];
      let row = [], cur = "", inQ = false;
      for (let i=0;i<text.length;i++){
        const c = text[i];
        if (c === '"'){
          if (inQ && text[i+1] === '"'){ cur += '"'; i++; }
          else inQ = !inQ;
        } else if (c === ',' && !inQ){
          row.push(cur); cur="";
        } else if ((c === '\n' || c === '\r') && !inQ){
          if (c === '\r' && text[i+1] === '\n') i++;
          row.push(cur);
          rows.push(row);
          row=[]; cur="";
        } else {
          cur += c;
        }
      }
      if (cur.length || row.length){ row.push(cur); rows.push(row); }
      return rows;
    }

    function esc(s){
      return String(s ?? "").replace(/[&<>"']/g, m => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
      }[m]));
    }

    function normalizeCarrier(c){
      c = (c||"").trim().toLowerCase();
      if (c === "lgu+" || c === "lgu" || c === "lg") return "lg";
      return c; // skt/kt/internet/mvno
    }

    function cardHTML(r){
      const carrier = normalizeCarrier(r.carrier);
      const priceType = (r.priceType||"free").trim().toLowerCase();
      const badges = [r.badge1, r.badge2, r.badge3].map(x => (x||"").trim()).filter(Boolean);

      return `
        <article class="card priceType-${esc(priceType)}">
          <div class="accent ${esc(carrier)}"></div>
          <div class="card-top">
            <div class="row">
              <h3 class="title">${esc(r.title || "-")}</h3>
              <div class="tag">${esc(r.tag || "")}</div>
            </div>
          </div>
          <div class="price">
            <strong>${esc(r.price || "")}</strong>
            <small>${esc(r.sub || "")}</small>
          </div>
          ${badges.length ? `<div class="badges">${badges.map(b=>`<span class="badge">${esc(b)}</span>`).join("")}</div>` : `<div style="height:12px"></div>`}
        </article>
      `;
    }

    async function loadAndRender(){
      const targets = {
        skt: document.getElementById("list-skt"),
        kt: document.getElementById("list-kt"),
        lg: document.getElementById("list-lg"),
        internet: document.getElementById("list-internet"),
        mvno: document.getElementById("list-mvno"),
      };

      // ë¡œë”© í‘œì‹œ
      Object.values(targets).forEach(el => el.innerHTML = `<div class="empty">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</div>`);

      let text = "";
      try{
        const res = await fetch("data.csv?x=" + Date.now(), {cache:"no-store"});
        if(!res.ok) throw new Error("HTTP " + res.status);
        text = await res.text();
      }catch(e){
        Object.values(targets).forEach(el => el.innerHTML = `<div class="empty">data.csv ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: ${esc(e.message)}</div>`);
        console.error("fetch data.csv failed", e);
        return;
      }

      // ë¹ˆ íŒŒì¼ ë°©ì§€
      if(!text.trim()){
        Object.values(targets).forEach(el => el.innerHTML = `<div class="empty">CSVê°€ ë¹„ì–´ìˆìŒ (data.csv ë‚´ìš© í™•ì¸)</div>`);
        return;
      }

      const table = parseCSV(text).filter(r => r.some(v => String(v||"").trim() !== ""));
      if(table.length < 2){
        Object.values(targets).forEach(el => el.innerHTML = `<div class="empty">CSV ë°ì´í„°ê°€ ë¶€ì¡±í•¨ (í—¤ë”+ë°ì´í„° í•„ìš”)</div>`);
        return;
      }

      const headers = table[0].map(h => (h||"").trim());
      const idx = Object.fromEntries(headers.map((h,i)=>[h,i]));

      function get(row, key){ return (row[idx[key]] ?? "").trim(); }

      const rows = table.slice(1).map(row => ({
        carrier: normalizeCarrier(get(row,"carrier")),
        title: get(row,"title"),
        tag: get(row,"tag"),
        price: get(row,"price"),
        priceType: get(row,"priceType") || "free",
        sub: get(row,"sub"),
        badge1: get(row,"badge1"),
        badge2: get(row,"badge2"),
        badge3: get(row,"badge3"),
      })).filter(r => r.carrier && r.title); // carrier/title ì—†ëŠ” ì¤„ì€ ë²„ë¦¼

      // ê·¸ë£¹í•‘
      const grouped = {skt:[], kt:[], lg:[], internet:[], mvno:[]};
      rows.forEach(r => {
        if(grouped[r.carrier]) grouped[r.carrier].push(r);
      });

      // ë Œë”
      for (const k of Object.keys(grouped)){
        const el = targets[k];
        if(!grouped[k].length){
          el.innerHTML = `<div class="empty">ë“±ë¡ëœ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤. (admin.htmlì—ì„œ data.csv ë¶ˆëŸ¬ì˜¤ê¸°/ìˆ˜ì •)</div>`;
        } else {
          el.innerHTML = grouped[k].map(cardHTML).join("");
        }
      }
    }

    loadAndRender();
  </script>
</body>
</html>
