<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ğŸ” SEO -->
  <title>ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° íŠ¹íŒ ì•ˆë‚´ | SKÂ·KTÂ·LG Â· ì¸í„°ë„·TV Â· ì•Œëœ°ìš”ê¸ˆ</title>
  <meta name="description" content="ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° ë§¤ì¥ íŠ¹íŒ ì „ìš© ì‚¬ì´íŠ¸. SKÂ·KTÂ·LG íœ´ëŒ€í° íŠ¹íŒ, ì¸í„°ë„·Â·TV í˜„ê¸ˆ ì§€ì›, ì•Œëœ°ìš”ê¸ˆ 3,300ì›~ ì‹¤ì‹œê°„ ì•ˆë‚´." />
  <link rel="canonical" href="https://a2272a.github.io/" />
  <meta name="robots" content="index,follow" />
  <meta name="keywords" content="ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í°, íœ´ëŒ€í° íŠ¹íŒ, ì•Œëœ°ìš”ê¸ˆ 3300ì›, íœ´ëŒ€í° ì„±ì§€, ì¸í„°ë„· TV í˜„ê¸ˆì§€ì›" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />

  <style>
    :root{
      --bg1:#eaf6ff;
      --bg2:#eaf7f1;
      --ink:#0b1220;
      --sub:#334155;
      --card:#ffffff;
      --line:rgba(15,23,42,0.10);

      --blue:#1d9bf0;
      --blue2:#2563eb;

      --skt:#0ea5e9;
      --kt:#111827;
      --lg:#c026d3;
      --internet:#f97316;
      --mvno:#16a34a;

      --radius:22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,'Noto Sans KR',sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 420px at 10% 0%, rgba(29,155,240,0.18) 0%, rgba(29,155,240,0) 60%),
        radial-gradient(900px 420px at 95% 20%, rgba(22,163,74,0.12) 0%, rgba(22,163,74,0) 60%),
        linear-gradient(180deg, #ffffff 0%, var(--bg1) 35%, var(--bg2) 100%);
    }

    .wrap{max-width:980px;margin:0 auto}
    header{
      padding:18px 16px 14px;
      background:linear-gradient(180deg, rgba(255,255,255,0.88), rgba(255,255,255,0.65));
      border-bottom:1px solid var(--line);
      backdrop-filter: blur(10px);
    }
    h1{
      margin:0;
      font-size:36px;
      font-weight:1000;
      letter-spacing:-0.05em;
      line-height:1.05;
    }
    .sub{
      margin-top:8px;
      font-size:16px;
      font-weight:900;
      color:var(--sub);
    }

    /* íƒ­ (ëª¨ë°”ì¼: 2x2 + 1) */
    .tabs{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      padding:14px 16px 10px;
    }
    .tab{
      border:none;
      cursor:pointer;
      border-radius:999px;
      padding:16px 12px;
      font-size:18px;
      font-weight:1000;
      background:rgba(255,255,255,0.86);
      border:1px solid var(--line);
      box-shadow:0 14px 26px rgba(15,23,42,0.10);
    }
    .tab.full{grid-column:1 / -1;}
    .tab.active{
      background:linear-gradient(135deg, var(--blue) 0%, var(--blue2) 100%);
      color:#fff;
      border-color:transparent;
      box-shadow:0 18px 30px rgba(37,99,235,0.20);
    }

    @media(min-width:900px){
      .tabs{grid-template-columns: repeat(5, 1fr);}
      .tab.full{grid-column:auto;}
    }

    /* ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */
    main{padding:4px 16px 120px;}
    .panel{display:none}
    .panel.active{display:block}

    /* ì¹´ë“œ */
    .cards{
      display:grid;
      gap:16px;
      grid-template-columns: 1fr;
      padding:10px 0 0;
    }
    @media(min-width:720px){
      .cards{grid-template-columns: 1fr 1fr;}
    }

    .card{
      background:rgba(255,255,255,0.88);
      border:1px solid var(--line);
      border-radius:26px;
      box-shadow:0 22px 40px rgba(15,23,42,0.12);
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute; left:0; top:0; right:0; height:7px;
      background:linear-gradient(90deg, rgba(239,68,68,0.95), rgba(249,115,22,0.75));
    }
    .card-inner{padding:18px 18px 16px}
    .row-top{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
    }
    .title{
      font-size:26px;
      font-weight:1000;
      letter-spacing:-0.04em;
      line-height:1.1;
      margin:0;
    }
    .tag{
      font-size:15px;
      font-weight:1000;
      color:#111827;
      opacity:0.85;
      white-space:nowrap;
      margin-top:4px;
    }

    .row-mid{
      margin-top:16px;
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:12px;
    }
    .price{
      font-size:54px;
      font-weight:1100;
      letter-spacing:-0.04em;
      line-height:1;
    }
    .price small{
      font-size:18px;
      font-weight:900;
      opacity:0.8;
      margin-left:6px;
    }
    .subtxt{
      text-align:right;
      font-size:18px;
      font-weight:900;
      color:var(--sub);
      line-height:1.15;
    }

    .badges{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:14px;
    }
    .badge{
      padding:10px 12px;
      border-radius:14px;
      font-size:15px;
      font-weight:1000;
      border:1px solid rgba(15,23,42,0.16);
      background:#fff;
      box-shadow:0 10px 18px rgba(15,23,42,0.08);
    }
    .badge.strong{border-color:rgba(37,99,235,0.35)}
    .badge.mini{font-size:14px;opacity:0.95}

    /* í•˜ë‹¨ ë¬¸ì˜ë°” */
    .contact-bar{
      position:fixed; left:0; right:0; bottom:0;
      background:rgba(255,255,255,0.92);
      backdrop-filter: blur(12px);
      border-top:1px solid var(--line);
      padding:10px 12px;
      z-index:50;
    }
    .contact-wrap{
      max-width:980px;
      margin:0 auto;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
    }
    .cbtn{
      display:flex;align-items:center;justify-content:center;
      gap:8px;
      text-decoration:none;
      border-radius:16px;
      padding:14px 10px;
      font-size:16px;
      font-weight:1000;
      border:1px solid var(--line);
      background:#fff;
      box-shadow:0 14px 26px rgba(15,23,42,0.12);
      color:#0b1220;
    }
    .cbtn.kakao{
      background:#fee500;
      border-color:rgba(250,204,21,0.9);
    }

    /* ì‘ì€ ì•ˆë‚´ */
    .meta{
      margin-top:10px;
      font-size:13px;
      color:rgba(51,65,85,0.85);
      font-weight:800;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <h1>ë³µì§€ê´€ 2ì¸µ íœ´ëŒ€í° íŠ¹íŒ ì•ˆë‚´</h1>
      <div class="sub">SKÂ·KTÂ·LG / ì¸í„°ë„·Â·TV í˜„ê¸ˆ ìµœëŒ€ì§€ì› / ì•Œëœ°ìš”ê¸ˆ 3,300ì›~</div>
      <div class="meta" id="visitText"></div>
    </header>

    <section class="tabs" aria-label="í†µì‹ ì‚¬ íƒ­">
      <button class="tab active" data-tab="skt">SKT</button>
      <button class="tab" data-tab="kt">KT</button>
      <button class="tab" data-tab="lg">LGU+</button>
      <button class="tab" data-tab="internet">ì¸í„°ë„·Â·TV</button>
      <button class="tab full" data-tab="mvno">ì•Œëœ°ìš”ê¸ˆ</button>
    </section>

    <main>
      <section class="panel active" data-panel="skt"><div class="cards" id="list-skt"></div></section>
      <section class="panel" data-panel="kt"><div class="cards" id="list-kt"></div></section>
      <section class="panel" data-panel="lg"><div class="cards" id="list-lg"></div></section>
      <section class="panel" data-panel="internet"><div class="cards" id="list-internet"></div></section>
      <section class="panel" data-panel="mvno"><div class="cards" id="list-mvno"></div></section>
    </main>
  </div>

  <!-- í•˜ë‹¨ ë¬¸ì˜ ë²„íŠ¼ -->
  <div class="contact-bar">
    <div class="contact-wrap">
      <!-- ì•„ë˜ 3ê°œë§Œ ë„¤ ì •ë³´ë¡œ ë°”ê¿” -->
      <a class="cbtn" href="tel:042-821-2272">ì „í™”</a>
      <a class="cbtn" href="sms:010-5839-1512">ë¬¸ì</a>
      <a class="cbtn kakao" href="https://open.kakao.com/o/s729bI5h" target="_blank" rel="noopener">ì¹´í†¡ ë¬¸ì˜</a>
    </div>
  </div>

  <script>
    // =========================
    // 0) Service Worker ë“±ë¡
    // =========================
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js').catch(()=>{});
      });
    }

    // =========================
    // 1) ë°©ë¬¸ì ì¹´ìš´íŠ¸
    // =========================
    const USE_COUNTAPI = true; // ì „ì„¸ê³„ ì´ ë°©ë¬¸ ì¹´ìš´íŠ¸
    const NAMESPACE = "a2272a-github-io";
    const KEY = "main-visits";

    async function updateVisitText(){
      const el = document.getElementById("visitText");
      try{
        if(!USE_COUNTAPI){
          el.textContent = "";
          return;
        }
        const res = await fetch(`https://api.countapi.xyz/hit/${encodeURIComponent(NAMESPACE)}/${encodeURIComponent(KEY)}`);
        const j = await res.json();
        if(typeof j?.value === "number"){
          el.textContent = `ì´ ë°©ë¬¸: ${j.value.toLocaleString()}íšŒ`;
        } else {
          el.textContent = "";
        }
      }catch(e){
        el.textContent = "";
      }
    }
    updateVisitText();

    // =========================
    // 2) íƒ­ UI
    // =========================
    const tabs = document.querySelectorAll(".tab");
    const panels = document.querySelectorAll(".panel");
    tabs.forEach(b=>{
      b.addEventListener("click", ()=>{
        tabs.forEach(x=>x.classList.remove("active"));
        panels.forEach(p=>p.classList.remove("active"));
        b.classList.add("active");
        document.querySelector(`[data-panel="${b.dataset.tab}"]`).classList.add("active");
        window.scrollTo({top:0,behavior:"smooth"});
      });
    });

    // =========================
    // 3) CSV ë¡œë“œ + ì¹´ë“œ ë Œë”
    // =========================
    function parseCSV(text){
      // ê°„ë‹¨/ì•ˆì • CSV íŒŒì„œ(ë”°ì˜´í‘œ ì§€ì›)
      const rows = [];
      let i=0, field="", inQuotes=false;
      const pushField = (arr)=>{ arr.push(field); field=""; };
      const pushRow = (arr)=>{ 
        // ë¹ˆ ì¤„ ë°©ì§€
        if(arr.length===1 && arr[0]==="") return;
        rows.push(arr); 
      };
      let cur=[];
      while(i<text.length){
        const c=text[i];
        if(inQuotes){
          if(c === '"'){
            if(text[i+1] === '"'){ field+='"'; i++; }
            else inQuotes=false;
          } else field+=c;
        } else {
          if(c === '"') inQuotes=true;
          else if(c === ','){ pushField(cur); }
          else if(c === '\n'){
            pushField(cur); pushRow(cur); cur=[];
          } else if(c !== '\r'){ field+=c; }
        }
        i++;
      }
      pushField(cur); pushRow(cur);
      return rows;
    }

    function normCarrier(x){
      x = (x||"").trim().toLowerCase();
      if(x==="skt") return "skt";
      if(x==="kt") return "kt";
      if(x==="lg" || x==="lgu" || x==="lgu+") return "lg";
      if(x==="internet" || x==="tv" || x==="ì¸í„°ë„·" || x==="ì¸í„°ë„·tv") return "internet";
      if(x==="mvno" || x==="ì•Œëœ°" || x==="ì•Œëœ°ìš”ê¸ˆ") return "mvno";
      return x;
    }

    function toPriceDisplay(price, priceType){
      // priceê°€ "íŒë§¤ê°€ 39ë§Œì›" ê°™ì€ í˜•ì‹ì´ë©´ ìˆ«ìë§Œ ë½‘ì•„ì„œ ì“°ê³ , ì—†ìœ¼ë©´ ì›ë¬¸ ìœ ì§€
      const raw = (price||"").toString().trim();
      const pt = (priceType||"").toString().trim().toLowerCase();

      // ìˆ«ìë§Œ ìˆì„ ë•Œ
      const num = raw.replace(/[^\d\-]/g,"");
      const hasNum = num !== "" && !isNaN(Number(num));
      let label = "";

      if(pt === "cash") label = "í˜„ê¸ˆ";
      else if(pt === "minus") label = "ë§ˆì´ë„ˆìŠ¤";
      else label = ""; // ê¸°ë³¸ì€ ê·¸ëƒ¥ ìˆ«ìë§Œ í¬ê²Œ

      if(hasNum){
        // â€œ39â€ì²˜ëŸ¼ ë„£ìœ¼ë©´ 39 í¬ê²Œ
        return { big: String(Number(num)), small: label };
      }
      // ìˆ«ì ëª» ë½‘ìœ¼ë©´ ì›ë¬¸ ì „ì²´
      return { big: raw, small: "" };
    }

    function badgeHTML(v, cls="mini"){
      const t=(v||"").trim();
      if(!t) return "";
      return `<span class="badge ${cls}">${escapeHTML(t)}</span>`;
    }

    function escapeHTML(s){
      return (s||"").replace(/[&<>"']/g, m=>({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
      }[m]));
    }

    function cardHTML(item){
      const { big, small } = toPriceDisplay(item.price, item.priceType);
      const badges = [
        item.badge1, item.badge2, item.badge3
      ].map(x=>x?.trim()).filter(Boolean);

      return `
        <article class="card">
          <div class="card-inner">
            <div class="row-top">
              <div>
                <h3 class="title">${escapeHTML(item.title || "")}</h3>
              </div>
              <div class="tag">${escapeHTML(item.tag || "")}</div>
            </div>

            <div class="row-mid">
              <div class="price">${escapeHTML(big)}${small ? `<small>${escapeHTML(small)}</small>` : ""}</div>
              <div class="subtxt">${escapeHTML(item.sub || "")}</div>
            </div>

            <div class="badges">
              ${badges.map(b=>badgeHTML(b, "strong")).join("")}
            </div>
          </div>
        </article>
      `;
    }

    async function loadAndRender(){
      const targets = {
        skt: document.getElementById("list-skt"),
        kt: document.getElementById("list-kt"),
        lg: document.getElementById("list-lg"),
        internet: document.getElementById("list-internet"),
        mvno: document.getElementById("list-mvno"),
      };
      Object.values(targets).forEach(el=>el.innerHTML="");

      let text="";
      try{
        const res = await fetch("data.csv", { cache: "no-store" });
        if(!res.ok) throw new Error("fetch failed");
        text = await res.text();
      }catch(e){
        // CSV ëª» ë¶ˆëŸ¬ì˜¤ë©´ ì•ˆë‚´ ì¹´ë“œ 1ê°œë¼ë„ ë„ì›€
        targets.skt.innerHTML = `<div class="card"><div class="card-inner">
          <h3 class="title">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</h3>
          <div class="subtxt">data.csvë¥¼ í™•ì¸í•˜ì„¸ìš”</div>
          <div class="badges"><span class="badge strong">admin.htmlì—ì„œ CSV ë¶ˆëŸ¬ì˜¤ê¸°</span></div>
        </div></div>`;
        return;
      }

      const table = parseCSV(text);
      if(!table.length){ return; }

      const headers = table[0].map(h=>h.trim());
      const idx = (name)=>headers.indexOf(name);

      // í•„ìˆ˜ í—¤ë” ê²€ì‚¬
      const need = ["carrier","title","tag","price","priceType","sub","badge1","badge2","badge3"];
      const ok = need.every(n=>idx(n)>=0);
      if(!ok){
        targets.skt.innerHTML = `<div class="card"><div class="card-inner">
          <h3 class="title">CSV í—¤ë”ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤</h3>
          <div class="subtxt">ì²« ì¤„ì„ í™•ì¸</div>
          <div class="badges"><span class="badge strong">carrier,title,tag,price,priceType,sub,badge1,badge2,badge3</span></div>
        </div></div>`;
        return;
      }

      const items = [];
      for(let r=1;r<table.length;r++){
        const row = table[r];
        if(!row || row.length===0) continue;

        const carrier = normCarrier(row[idx("carrier")]||"");
        if(!carrier) continue;

        const item = {
          carrier,
          title: row[idx("title")]||"",
          tag: row[idx("tag")]||"",
          price: row[idx("price")]||"",
          priceType: row[idx("priceType")]||"",
          sub: row[idx("sub")]||"",
          badge1: row[idx("badge1")]||"",
          badge2: row[idx("badge2")]||"",
          badge3: row[idx("badge3")]||"",
        };

        // ì™„ì „ ë¹ˆ í•­ëª© ë°©ì§€
        const any = [item.title,item.tag,item.price,item.sub,item.badge1,item.badge2,item.badge3].some(v=>String(v||"").trim()!=="");
        if(!any) continue;

        items.push(item);
      }

      // ë Œë”
      const grouped = {skt:[],kt:[],lg:[],internet:[],mvno:[]};
      items.forEach(it=>{
        if(grouped[it.carrier]) grouped[it.carrier].push(it);
      });

      Object.keys(grouped).forEach(k=>{
        const list = grouped[k];
        if(list.length===0){
          targets[k].innerHTML = "";
          return;
        }
        targets[k].innerHTML = list.map(cardHTML).join("");
      });
    }

    loadAndRender();
  </script>
</body>
</html>

